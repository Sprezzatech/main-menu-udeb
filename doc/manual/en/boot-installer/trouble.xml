<!-- retain these comments for translator revision tracking -->
<!-- $Id: trouble.xml,v 1.2 2003/10/24 01:03:02 toff Exp $ -->

 <sect1 id="boot-troubleshooting">
 <title>Troubleshooting the Install Process</title>
<para>
</para>

  <sect2 id="unreliable-floppies">
  <title>Floppy Disk Reliability</title>

<para>

The biggest problem for people installing Debian for the first time
seems to be floppy disk reliability.

</para><para>

The rescue floppy is the floppy with the worst problems, because it
is read by the hardware directly, before Linux boots.  Often, the
hardware doesn't read as reliably as the Linux floppy disk driver, and
may just stop without printing an error message if it reads incorrect
data. There can also be failures in the Driver Floppies most of which
indicate themselves with a flood of messages about disk I/O errors.

</para><para>

If you are having the installation stall at a particular floppy, the
first thing you should do is re-download the floppy disk image and
write it to a <emphasis>different</emphasis> floppy. Simply
reformatting the old
floppy may not be sufficient, even if it appears that the floppy was
reformatted and written with no errors. It is sometimes useful to try
writing the floppy on a different system.

</para><para>

One user reports he had to write the images to floppy
<emphasis>three</emphasis> times before one worked, and then
everything was fine with the third floppy.

</para><para>

Other users have reported that simply rebooting a few times with the
same floppy in the floppy drive can lead to a successful boot. This is
all due to buggy hardware or firmware floppy drivers.

</para>
  </sect2>

  <sect2 arch="i386"><title>Unsupported video cards</title>

<para>

If your screen begins to show a weird picture while the kernel boots, eg. pure
white, pure black or colored pixel garbage, your system may contain a
problematic video card which does not switch to the framebuffer mode properly.
Then you can use the boot parameter <userinput>video=vga16:off</userinput> to disable the
framebuffer console. The language chooser will not appear, only the english
language will be available during the installation due to limited console
features. See <xref linkend="boot-parms"/> for details.

</para>
  </sect2>

  <sect2><title>Boot Configuration</title>

<para>

If you have problems and the kernel hangs during the boot process,
doesn't recognize peripherals you actually have, or drives are not
recognized properly, the first thing to check is the boot parameters,
as discussed in <xref linkend="boot-parms"/>.

</para><para>

If you are booting with your own kernel instead of the one supplied
with the installer, be sure that <userinput>CONFIG_DEVFS</userinput> is not set in
your kernel.  The installer is not compatible with
<userinput>CONFIG_DEVFS</userinput>.

</para><para>

Often, problems can be solved by removing add-ons and peripherals, and
then trying booting again.  <phrase arch="i386">Internal modems, sound
cards, and Plug-n-Play devices can be especially problematic.</phrase>

</para><para>

There are, however, some limitations in our boot floppy set with
respect to supported hardware.  Some Linux-supported platforms might
not be directly supported by our boot floppies.  If this is the case,
you may have to create a custom rescue disk (see
<xref linkend="rescue-replace-kernel"/>), or investigate network
installations.

</para><para>

If you have a large amount of memory installed in your machine, more
than 512M, and the installer hangs when booting the kernel, you may
need to include a boot argument to limit the amount of memory the
kernel sees, such as <userinput>mem=512m</userinput>.

</para><para arch="i386">

If you have a very old machine, and the kernel hangs after saying
<computeroutput>Checking 'hlt' instruction...</computeroutput>, then
you should try the <userinput>no-hlt</userinput> boot argument, which
disables this test.

</para><para arch="sparc">

If you cannot boot because you get messages about a problem with
``IDPROM'', then it's possible that your NVRAM battery, which holds
configuration information for you firmware, has run out.  See the

<ulink url="&url-sun-nvram-faq;">Sun NVRAM FAQ</ulink> for more
information.

</para><para arch="sparc">

If you are booting from the floppy, and you seem messages such as 
<informalexample><screen>

Fatal error: Cannot read partition
Illegal or malformed device name

</screen></informalexample>
then it is possible that floppy booting is simply not supported on
your machine.  See <xref linkend="boot-from-floppies"/>.

</para>
  </sect2>

  <sect2 arch="i386">
  <title>System freeze during the PCMCIA configuration phase</title>

<para>

Some laptop models produced by DELL are known to crash when PCMCIA device
detection tries to access some hardware addresses. If you experience a such problem, try the following workaround:
<itemizedlist>
<listitem><para>

prepare the root filesystem and install kernel and modules, but do not
start PCMCIA configuration immediately

</para></listitem>
<listitem><para>

enter the system shell (see <xref linkend="dbootstrap-shell-log"/> for
details)

</para></listitem>
<listitem><para>

execute this command: 
<userinput>echo exclude port 0x810-0x81f >>
/target/etc/pcmcia/config.opts</userinput>

</para></listitem>
<listitem><para>

now return to dbootstrap and run the PCMCIA configuration part

</para></listitem>
</itemizedlist>

</para>
  </sect2>

  <sect2 arch="i386">
  <title>System freeze while loading the USB modules</title>
<para>

The bf2.4 flavor normaly tries to install the USB and USB keyboard driver in
order to allow the installation for users of some non-standard USB keyboards.
However, there are few broken USB systems where the driver hangs on loading. A
possible workaround may be disabling of the USB controller in your mainboard
BIOS setup. Another way is passing the <userinput>nousb</userinput>
argument on the boot prompt, which will prevent the modules from
beeing loaded even if USB hardware has been detected.

</para>
  </sect2>

  <sect2 id="kernel-msgs">
  <title>Interpreting the Kernel Startup Messages</title>

<para>

During the boot sequence, you may see many messages in the form
<computeroutput>can't find something</computeroutput>, or
<computeroutput>something not present</computeroutput>,
<computeroutput>can't initialize something</computeroutput>, or even
<computeroutput>this driver release depends on something</computeroutput>.
Most of these messages are harmless. You
see them because the kernel for the installation system is built to
run on computers with many different peripheral devices. Obviously, no
one computer will have every possible peripheral device, so the
operating system may emit a few complaints while it looks for
peripherals you don't own. You may also see the system pause for a
while. This happens when it is waiting for a device to respond, and
that device is not present on your system. If you find the time it
takes to boot the system unacceptably long, you can create a
custom kernel later (see <xref linkend="kernel-baking"/>).

</para>
  </sect2>

  <sect2 id="problem-report">
  <title><command>dbootstrap</command> Problem Report</title>
<para>

If you get through the initial boot phase but cannot complete the install,
<command>dbootstrap</command>'s 'Report a Problem' menu choice may be
helpful. It creates <filename>dbg_log.tgz</filename> on a floppy, hard
disk or nfs-mounted
filesystem.  <filename>dbg_log.tgz</filename> details the system's state
(<filename>/var/log/messages</filename>,
<filename>/proc/cpuinfo</filename> etc.).
<filename>dbg_log.tgz</filename> may provide clues as to what went
wrong and how to fix it.  If you are submitting a bug report you may
want to attach this file to the bug report.

</para>
  </sect2>

  <sect2 id="submit-bug">
  <title>Submitting Bug Reports</title>
<para>

If you still have problems, please submit a bug report.  Send an email
to <email>submit@bugs.debian.org</email>.  You
<emphasis>must</emphasis> include
the following as the first lines of the email:

<informalexample><screen>

Package: boot-floppies
Version: <replaceable>version</replaceable>

</screen></informalexample>

Make sure you fill in <replaceable>version</replaceable> with the
version of the
boot-floppies set that you used. If you don't know the
<emphasis>version</emphasis>, use the date you downloaded the
floppies, and include the distribution you got them from (e.g.,
``stable'', ``frozen'', ``woody'').

</para><para>

You should also include the following information in your bug report:

<informalexample><screen>

<phrase arch="i386">
flavor:        <replaceable>flavor of image you are using</replaceable>
</phrase>
architecture:  &architecture; 
model:         <replaceable>your general hardware vendor and model</replaceable>
memory:        <replaceable>amount of RAM</replaceable>
scsi:          <replaceable>SCSI host adapter, if any</replaceable>
cd-rom:        <replaceable>CD-ROM model and interface type, e.g., ATAPI</replaceable>
network card:  <replaceable>network interface card, if any</replaceable>
pcmcia:        <replaceable>details of any PCMCIA devices</replaceable>

</screen></informalexample>

</para><para>

Depending on the nature of the bug, it also might be useful to report
whether you are installing to IDE or SCSI disks, other peripheral
devices such as audio, disk capacity, and the model of video card.

</para><para>

In the bug report, describe what the problem is, including the last
visible kernel messages in the event of a kernel hang.  Describe the
steps that you did which brought the system into the problem state.

</para>

  </sect2>

 </sect1>
