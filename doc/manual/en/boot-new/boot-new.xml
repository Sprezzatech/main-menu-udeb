<!-- retain these comments for translator revision tracking -->
<!-- $Id: boot-new.xml,v 1.1 2004/01/08 17:10:20 mck-guest Exp $ -->

<chapter id="boot-new">
 <title>Booting Into Your New Debian System</title>

 <sect1><title>Make System Bootable</title>
<para>

Note that multiple operating systems booting on a single machine is
still something of a black art.  This document does not even attempt
to document the various boot managers, which vary by architecture and
even by subarchitecture.   You should see your boot manager's
documentation for more information.

</para>

&bootloader-i386.xml;
&bootloader-m68k.xml;
&bootloader-alpha.xml;
&bootloader-sparc.xml;
&bootloader-powerpc.xml;
&bootloader-hppa.xml;
&bootloader-s390.xml;
&bootloader-arm.xml;
&bootloader-mipsel.xml;

  <sect2 condition="supports-nfsroot"><title>Diskless Workstations</title>
<para>

If you are installing a diskless workstation, obviously, booting off
the local disk isn't a meaningful option, and this step will be
skipped. <phrase arch="sparc">You may wish to set the OpenBoot to boot
from the network by default; see <xref
linkend="boot-dev-select-sun"/>.</phrase>

</para>

  </sect2>
</sect1>

 <sect1 id="make-boot-floppy"><title>Making a Boot Floppy</title>
<para>

You may wish to make a boot floppy even if you intend to boot the
system from the hard disk. The reason for this is that it's possible
for the hard disk bootstrap to be mis-installed, but a boot floppy
will almost always work.

</para><para>

Feed the system a blank floppy as directed. Make sure the floppy isn't
write-protected, as the software will format and write it. Mark this
the <quote>Custom Boot</quote> floppy and write-protect it once it has
been written.

</para><para>

This floppy will contain a kernel and a simple file system, with a
directive to use your new root file system.

</para><para arch="alpha">

Unfortunately, a boot floppy can only be made for SRM systems, since
<command>MILO</command> won't fit together with a kernel on a single
floppy.

</para>
 </sect1>


 <sect1 id="base-boot"><title>The Moment of Truth</title>
<para>

You system's first boot on its own power is what electrical engineers
call the <quote>smoke test</quote>.

</para><para arch="s390">

Select the ``Reboot the System'' menu item which will halt the system
because rebooting is not supported on &arch-title; in this case. You
then need to IPL GNU/Linux from the DASD which you selected for the
root filesystem during the first steps of the installation.

</para><para>

If you are booting directly into Debian, and the system doesn't start
up, either use your original installation boot media (for instance,
the rescue floppy), or insert the custom boot floppy if you created
one, and reset your system.  If you are <emphasis>not</emphasis> using
the custom boot floppy, you will probably need to add some boot
arguments.  If booting with the rescue floppy or similar technique,
you need to specify
<userinput>rescue root=<replaceable>root</replaceable></userinput>,
where <replaceable>root</replaceable> is your root partition, such as
<filename>/dev/sda1</filename>.

</para>

  <sect2 arch="m68k"><title>VME6000 Booting</title>
<para>

If you have just performed a diskless install on a BVM or Motorola
VMEbus machine: once the system has loaded the
<command>tftplilo</command> program from the TFTP server, from the
<prompt>LILO Boot:</prompt> prompt enter one of:

<itemizedlist>
<listitem><para>

<userinput>b6000</userinput> followed by &enterkey;
to boot a BVME4000/6000

</para></listitem><listitem><para>

<userinput>b162</userinput> followed by &enterkey;
to boot an MVME162

</para></listitem><listitem><para>

<userinput>b167</userinput> followed by &enterkey;
to boot an MVME166/167

</para></listitem>
</itemizedlist>

</para>

   </sect2>

  <sect2 arch="m68k"><title>Macintosh Booting</title>

<para>

Go to the directory containing the installation files and start up the
<command>Penguin</command> booter, holding down the
<keycap>command</keycap> key.  Go to the
<userinput>Settings</userinput> dialogue (<keycombo>
<keycap>command</keycap> <keycap>T</keycap> </keycombo>), and locate
the kernel options line which should look like
<userinput>root=/dev/ram video=font:VGA8x16</userinput> or similar.

</para><para>

You need to change the entry to
<userinput>root=/dev/<replaceable>yyyy</replaceable></userinput>.
Replace the <replaceable>yyyy</replaceable> with the Linux name of the
partition onto which you installed the system
(e.g. <filename>/dev/sda1</filename>); you wrote this down earlier.
The <userinput>video=font:VGA8x8</userinput> is recommended especially
for users with tiny screens. The kernel would pick a prettier (6x11)
font but the console driver for this font can hang the machine, so
using 8x16 or 8x8 is safer at this stage.  You can change this at any
time.

</para><para>

If you don't want to start GNU/Linux immediately each time you start,
uncheck the <userinput>Auto Boot</userinput> option. Save your
settings in the <filename>Prefs</filename> file using the
<userinput>Save Settings As Default</userinput> option.

</para><para>

Now select <userinput>Boot Now</userinput> (<keycombo>
<keycap>command</keycap> <keycap>B</keycap> </keycombo>) to start your
freshly installed GNU/Linux instead of the RAMdisk installer system.

</para><para>

Debian should boot, and you should see the same messages as
when you first booted the installation system, followed by some new
messages. 

</para>

   </sect2>
 </sect1>

 <sect1 id="base-config">
 <title>Debian Post-Boot (Base) Configuration</title>

<para>

After booting, you will be prompted to complete the configuration of
your basic system, and then to select what additional packages you
wish to install.  The application which guides you through this
process is called <classname>base-config</classname>. If you wish to
re-run the <classname>base-config</classname> at any point after
installation is complete, as root run
<userinput>base-config</userinput>.

</para>

 </sect1>

 <sect1 id="base-config-tz">
 <title>Configuring your Time Zone</title>

<para>

You will first be prompted to configure your time zone.
<phrase arch="m68k;powerpc">Macintosh hardware clocks are normally
set to local time. If you want to dual-boot, select local instead of
GMT.</phrase>
After selecting local vs. GMT hardware clock setting, you will select
a region and then a city within that region which is in the same time
zone you are. When making selections in these lists, you can type a
single letter to take you to the section of the list beginning with
that letter.

</para>

 </sect1>

 <sect1 id="base-config-md5">
 <title>MD5 Passwords</title>

<para>

You will next be prompted whether to install MD5 passwords.  This is
an alternate method of storing passwords on your system which is more
secure than the standard means (called <quote>crypt</quote>).

</para><para>

The default is &MSG-NO;, but if you do not require NIS support and are
very concerned about security on this machine, you may say &MSG-YES;.

</para>

 </sect1>

 <sect1 id="base-config-shadow">
 <title>Shadow Passwords</title>

<para>

Unless you said &MSG-YES; to MD5 passwords, the system will ask
whether you want to enable shadow passwords.  This is a system in
which your GNU/Linux system is made to be a bit more secure.  In
a system without shadow passwords, passwords are stored (encrypted) in
a world-readable file, <filename>/etc/passwd</filename>.  This file
has to be readable to anyone who can log in because it contains vital
user information, for instance, how to map between numeric user
identifiers and login names.  Therefore, someone could conceivably
grab your <filename>/etc/passwd</filename> file and run a brute force
attack (i.e. run an automated test of all possible password
combinations) against it to try to determine passwords.

</para><para>

If you have shadow passwords enabled, passwords are instead stored in
<filename>/etc/shadow</filename>, which is readable and writable only
by root, and readable by group shadow. Therefore, we recommend that
you enable shadow passwords.

</para><para>

Reconfiguration of the shadow password system can be done at any time
with the <command>shadowconfig</command> program.  After installation,
see <filename>/usr/share/doc/passwd/README.debian.gz</filename> for
more information.

</para>

 </sect1>

 <sect1 id="base-config-root">
 <title>Set the Root Password</title>

<para>

The <emphasis>root</emphasis> account is also called the
<emphasis>super-user</emphasis>; it is a login that bypasses all
security protection on your system. The root account should only be
used to perform system administration, and only used for as short
a time as possible.

</para><para>

Any password you create should contain from 6 to 8 characters, and
should contain both upper- and lower-case characters, as well as
punctuation characters.  Take extra care when setting your root
password, since it is such a powerful account.  Avoid dictionary
words or use of any personal information which could be guessed.

</para><para>

If anyone ever tells you they need your root password, be extremely
wary. You should normally never give your root account out, unless you
are administering a machine with more than one system administrator.

</para>

 </sect1>

 <sect1 id="make-normal-user">
 <title>Create an Ordinary User</title>

<para>

The system will ask you whether you wish to create an ordinary user
account at this point.  This account should be your main personal
log-in.  You should <emphasis>not</emphasis> use the root account for
daily use or as your personal login.

</para><para>

Why not?  Well, one reason to avoid using root's privileges is that it
is very easy to do irreparable damage as root.  Another reason is that
you might be tricked into running a <emphasis>Trojan-horse</emphasis>
program &mdash; that is a program that takes advantage of your
super-user powers to compromise the security of your system behind
your back. Any good book on Unix system administration will cover this
topic in more detail &mdash; consider reading one if it is new to you.

</para><para>

Name the user account anything you like.  If your name is John Smith,
you might use <userinput>smith</userinput>,
<userinput>john</userinput>, <userinput>jsmith</userinput> or
<userinput>js</userinput>.  You will also be prompted for the full
name of the user, and, like before, a password.

</para><para>

If at any point after installation you would like to create another
account, use the <command>adduser</command> command.

</para><para>

You need to create a user account on &arch-title; if you want to login
over the network using telnet. The telnet server does not allow root
logins in Debian's default configuration. However, you can use ssh
(Secure SHell) to remotely login as root but this is not
recommended.

</para>

 </sect1>

 <sect1 arch="not-s390" id="PPP">
 <title>Setting Up PPP</title>

<para>

You will next be asked whether you wish to install the rest of the
system using PPP.  If you are installing from CD-ROM and/or are
connected directly to the network, you can safely say &MSG-NO; and
skip this section.

</para><para>

If you do choose to configure PPP at this point, a program named
<command>pppconfig</command> will be run.  This program helps you
configure your PPP connection.  <emphasis>Make sure, when it asks you
for the name of your dialup connection, that you name it
<userinput>provider</userinput>.</emphasis>

</para><para>

Hopefully, the <command>pppconfig</command> program will walk you
through a pain-free PPP connection setup.  However, if it does not
work for you, see below for detailed instructions.

</para><para>

In order to setup PPP, you'll need to know the basics of file viewing
and editing in GNU/Linux.  To view files, you should use
<command>more</command>, and <command>zmore</command> for compressed
files with a <userinput>.gz</userinput> extension.  For example, to
view <filename>README.debian.gz</filename>, type <userinput>zmore
README.debian.gz</userinput>.  The base system comes with an editor
named <command>nano</command>, which is very simple to use, but does
not have a lot of features. You will probably want to install more
full-featured editors and viewers later, such as
<command>jed</command>, <command>nvi</command>,
<command>less</command>, and <command>emacs</command>.

</para><para>

Edit <filename>/etc/ppp/peers/provider</filename> and replace
<userinput>/dev/modem</userinput> with
<userinput>/dev/ttyS<replaceable>&num;</replaceable></userinput> where
<replaceable>&num;</replaceable> stands for the number of your serial
port. In Linux, serial ports are counted from 0; your first serial
port <phrase arch="i386">(i.e., <userinput>COM1</userinput>)</phrase>
is <filename>/dev/ttyS0</filename> under Linux.

<phrase arch="powerpc;m68k">On Macintoshes with serial ports, the
modem port is <filename>/dev/ttyS0</filename> and the printer port is
<filename>/dev/ttyS1</filename>.</phrase>

The next step is to edit
<filename>/etc/chatscripts/provider</filename> and insert your
provider's phone number, your user-name and password. Please do not
delete the <quote>\q</quote> that precedes the password. It hides the
password from appearing in your log files.

</para><para>

Many providers use PAP or CHAP for login sequence instead of text mode
authentication.  Others use both.  If your provider requires PAP or
CHAP, you'll need to follow a different procedure.  Comment out
everything below the dialing string (the one that starts with
<quote>ATDT</quote>) in
<filename>/etc/chatscripts/provider</filename>, modify
<filename>/etc/ppp/peers/provider</filename> as described above, and
add <userinput>user <replaceable>name</replaceable></userinput> where
<replaceable>name</replaceable> stands for your user-name for the
provider you are trying to connect to.  Next, edit
<filename>/etc/ppp/pap-secrets</filename> or
<filename>/etc/ppp/chap-secrets</filename> and enter your password
there.

</para><para>

You will also need to edit <filename>/etc/resolv.conf</filename> and
add your provider's name server (DNS) IP addresses.  The lines in
<filename>/etc/resolv.conf</filename> are in the following format:
<userinput>nameserver
<replaceable>xxx.xxx.xxx.xxx</replaceable></userinput> where the
<replaceable>x</replaceable>s stand for numbers in your IP
address. Optionally, you could add the
<userinput>usepeerdns</userinput> option to the
<filename>/etc/ppp/peers/provider</filename> file, which will enable
automatic choosing of appropriate DNS servers, using settings the
remote host usually provides.

</para><para>

Unless your provider has a login sequence different from the majority
of ISPs, you are done! Start the PPP connection by typing
<command>pon</command> as root, and monitor the process using
<command>plog</command> command. To disconnect, use
<command>poff</command>, again, as root.

</para><para>

Read <filename>/usr/share/doc/ppp/README.Debian.gz</filename> file for
more information on using PPP on Debian.

</para><para>

For static SLIP connections, you will need to add the
<userinput>slattach</userinput> command (from the
<classname>net-tools</classname> package) into
<filename>/etc/init.d/network</filename>. Dynamic SLIP will require
the <classname>gnudip</classname> package.

</para>

 </sect1>


 <sect1 condition="supports-pcmcia">
 <title>Removing PCMCIA</title>

<para>

If you have no use for PCMCIA, you can choose to remove it at this
point.  This will make your startup cleaner; also, it will make it
easier to replace your kernel (PCMCIA requires a lot of correlation
between the version of the PCMCIA drivers, the kernel modules, and the
kernel itself).

</para>

 </sect1>

 <sect1 id="configure-apt">
 <title>Configuring APT</title>

<para>

The main means that people use to install packages on their system is
via a program called <command>apt-get</command>, from the
<classname>apt</classname> package.<footnote>

<para>

Note that the actual program that installs packages is called
<command>dpkg</command>.  However, this package is more of a low-level
tool.  <command>apt-get</command> will invoke <command>dpkg</command>
as appropriate; it is a higher-level too, however, because it knows to
install other packages which are required for the package you're
trying to install, as well as how to retrieve the package from your
CD, the network, or wherever.

</para>
</footnote>

APT must be configured, however, so that it knows where to retrieve
packages from.  The helper application which assists in this task is
called <command>apt-setup</command>.

</para><para>

The next step in your configuration process is to tell APT where other
Debian packages can be found.  Note that you can re-run this tool at
any point after installation by running <command>apt-setup</command>,
or by manually editing <filename>/etc/apt/sources.list</filename>.

</para><para>

If you are booting from an official CD-ROM, then that CD-ROM should
automatically be configured as an apt source without prompting.  You
will notice this because you will see the CD-ROM being scanned, and
then asked if you want to configure another CD-ROM.  If you have
a multiple CD-ROM set &mdash; and most people will &mdash; then you
should go ahead and scan each of them one by one.

</para><para>

For users without an official CD-ROM, you will be offered an array of
choices for how Debian packages are accessed: FTP, HTTP, CD-ROM, or
a local file system.  For CD-ROM users, you can get to this step by
specifically asking to add another source.

</para><para>

You should know that it's perfectly acceptable to have a number of
different APT sources, even for the same Debian archive.
<command>apt-get</command> will automatically pick the package with
the highest version number given all the available versions.  Or, for
instance, if you have both an HTTP and a CD-ROM APT source,
<command>apt-get</command> should automatically use the local CD-ROM
when possible, and only resort to HTTP if a newer version is available
there.  However, it is not a good idea to add unnecessary APT sources,
since this will tend to slow down the process of checking the network
archives for new versions.

</para>

  <sect2 id="configure-apt-net">
  <title>Configuring Network Package Sources</title>

<para>

If you plan on installing the rest of your system via the network, the
most common option is to select the <userinput>http</userinput>
source.  The <userinput>ftp</userinput> source is also acceptable, but
tends to be a little slower making connections.

</para><para>

Next you will be asked whether you wish to have any non-free software.
That refers to commercial software or any other software whose
licensing does not comply with the <ulink url="&url-dfsg;">Debian Free
Software Guidelines</ulink>.  It's fine to say &MSG-YES;, but be
careful when installing such software, because you will need to ensure
that you are using the software in compliance with its license.

</para><para>

The next step during the configuration of network packages sources is
to tell <command>apt-setup</command> which country you live in.  This
configures which of the official Debian Internet mirror network you
connect to.  Depending on which country you select, you will be given
a list of possible machines.  Its generally fine to pick the one on
the top of the list, but any of them should work.

</para><para>

If you are installing via HTTP, you will be asked to configure your
proxy server.  This is sometimes required by people behind firewalls,
on corporate networks, etc.

</para><para>

Finally, your new network package source will be tested.  If all goes
well, you will be prompted whether you want to do it all over again
with another network source.

</para>

  </sect2>

 </sect1>

 <sect1 id="install-packages">
 <title>Package Installation: Simple or Advanced</title>

<para>

You will next be prompted whether you wish to install packages the
simple way, or the more fine-grained, advanced way.  We recommend you
start with the simple way, since you can always run the more advanced
way at any time.

</para><para>

You should know that for simple installation,
<command>base-config</command> is merely invoking the
<command>tasksel</command> program.  For advanced package
installation, the <command>dselect</command> program is being run.
Either of these can be run at any time after installation to install
more packages.  If you are looking for a specific single package,
after installation is complete, simply run <userinput>apt-get install
<replaceable>package</replaceable></userinput>, where
<replaceable>package</replaceable> is the name of the package you are
looking for.

</para>

 </sect1>

 <sect1 id="preselections">
 <title>Simple Package Selection &mdash; The Task Installer</title>

<para>

If you chose <quote>simple</quote> installation, you will next be
thrown into the Task Installer (<command>tasksel</command>).  This
technique offers you a number of pre-rolled software configurations
offered by Debian. You could always choose, package by package, what
you want to install on your new machine.  This is the purpose of the
<command>dselect</command> program, described below.  But this can be
a long task with around &num-of-distrib-pkgs; packages available in
Debian!

</para><para>

So, you have the ability to choose <emphasis>tasks</emphasis> first,
and then add on more individual packages later.  These tasks loosely
represent a number of different jobs or things you want to do with
your computer, such as <quote>desktop environment</quote>,
<quote>development in C</quote>, or <quote>file server</quote>.

</para><para>

For each task, you can highlight that task and select ``Task Info'' to
see more information on that task. This will show you an extended
description and the list of packages which will be installed for that
task. A table showing approximate sizes of the various tasks for
planning purposes is in <xref linkend="tasksel-size-list"/>.

</para><para>

Once you've selected your tasks, select ``Finish''. At this point,
<command>apt-get</command> will install the packages you've
selected. Note, if you did not select any tasks at all, any standard,
important, or required priority packages that are not yet present on
your system will be installed.  This functionality is the same as
running tasksel -s at the command line, and currently involves
a download of about 37M of archives. You will be shown the number of
packages to be installed, and how many kilobytes of packages, if any,
need to be downloaded.

</para><para>

Of the &num-of-distrib-pkgs; packages available in Debian, only
a small minority are covered by tasks offered in the Task Installer.
To see information on more packages, either use <userinput>apt-cache
search <replaceable>search-string</replaceable></userinput> for some
given search string (see the <citerefentry>
<refentrytitle>apt-cache</refentrytitle> <manvolnum>8</manvolnum>
</citerefentry> man page), or run <command>dselect</command> as
described below.

</para>

 </sect1>

 <sect1 id="install-advanced">
 <title>Advanced Package Selection with <command>dselect</command></title>

<para>

If you selected <quote>advanced</quote> package selection, you'll be
dropped into the <command>dselect</command> program.  The <ulink
url="&url-dselect-beginner;">dselect Tutorial</ulink> is required
reading before you run <command>dselect</command>.
<command>dselect</command> allows you to select
<emphasis>packages</emphasis> to be installed on your system. You must
be the super-user (root) when you run <command>dselect</command>.

</para>

 </sect1>

 <sect1 id="debconf">
 <title>Prompts During Software Installation</title>

<para>

Each package you selected with either <command>tasksel</command>
and/or <command>dselect</command> is unpacked and then installed in
turn by the <command>apt-get</command> and <command>dpkg</command>
programs. If a particular program needs more information from the
user, it will prompt you during this process. You might also want to
keep an eye on the output during the process, to watch for any
installation errors (although you will be asked to acknowledge errors
which prevented a package's installation).

</para>

  <sect2 arch="powerpc" id="xserver">
  <title>Settings for the X Server</title>

<para>

On iMacs, and some older Macintoshes as well, the X Server software
doesn't calculate appropriate video settings. You will need to choose
the 'Advanced' option during configuration of the video settings. For
the monitor's horizontal sync range, enter 59-63. You can leave the
default for vertical refresh range.

</para><para>

The mouse device should be set to
<userinput>/dev/input/mice</userinput>.

</para>

  </sect2>

 </sect1>

 <sect1 id="login">
 <title>Log In</title>

<para>

After you've installed packages, you'll be presented with the login
prompt.  Log in using the personal login and password you
selected. Your system is now ready to use.

</para><para>

If you are a new user, you may want to explore the documentation which
is already installed on your system as you start to use it. There are
currently several documentation systems, work is proceeding on
integrating the different types of documentation. Here are a few
starting points.

</para><para>

Documentation accompanying programs you have installed is in
<filename>/usr/share/doc/</filename>, under a subdirectory named after
the program.  For example, the APT User's Guide for using
<command>apt</command> to install other programs on your system, is
located in
<filename>/usr/share/doc/apt/guide.html/index.html</filename>.

</para><para>

 
In addition, there are some special folders within the
<filename>/usr/share/doc/</filename> hierarchy. Linux HOWTOs are
installed in <emphasis>.gz</emphasis> format, in
<filename>/usr/share/doc/HOWTO/en-txt/</filename> and
<filename>/usr/share/doc/HOWTO/en-txt/mini/</filename>. The
<filename>/usr/share/doc/HTML/index.html</filename> contains
browse-able indexes of documentation installed by
<command>dhelp</command>.

</para><para>

One easy way to view these documents is to <userinput>cd
/usr/share/doc/</userinput>, and type <userinput>lynx</userinput>
followed by a space and a dot (the dot stands for the current
directory).

</para><para>

You can also type <userinput>info
<replaceable>command</replaceable></userinput> or <userinput>man
<replaceable>command</replaceable></userinput> to see documentation on
most commands available at the command prompt. Typing
<userinput>help</userinput> will display help on shell commands. And
typing a command followed by <userinput>--help</userinput> will
usually display a short summary of the command's usage. If a command's
results scroll past the top of the screen, type <userinput>|
more</userinput> after the command to cause the results to pause
before scrolling past the top of the screen. To see a list of all
commands available which begin with a certain letter, type the letter
and then two tabs.

</para><para>

For a more complete introduction to Debian and GNU/Linux, see
<filename>/usr/share/doc/debian-guide/html/noframes/index.html</filename>.

</para>

 </sect1>
</chapter>
