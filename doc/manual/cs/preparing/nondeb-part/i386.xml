<?xml version="1.0" encoding="ISO-8859-2"?>
<!-- $Id: i386.xml,v 1.2 2004/02/09 17:04:53 mck-guest Exp $ -->
<!-- original version: 1.8 -->

  <sect2 arch="i386"><title>Dìlení disku v systémech DOS a Windows</title>
<para>

Pokud budete mìnit diskové oddíly se souborovými svazky FAT nebo NTFS,
doporuèuje se buï postup popsaný dále v textu, nebo pou¾ití programù
dodávaných se systémy DOS nebo Windows. V opaèném pøípadì není nutné
provádìt rozdìlení disku z tìchto systémù, lep¹ích výsledkù obvykle
docílíte linuxovými nástroji.

</para><para>

Mo¾ným problémem mù¾e být velký IDE disk, na kterém nepou¾íváte ani
LBA adresování, ani pøekládací ovladaè od výrobce, nebo pokud máte
star¹í BIOS (vyrobený pøed rokem 1998), který nepodporuje roz¹íøení
pro velké disky.
Potom je nutné umístit zavádìcí oddíl do prvních 1024 cylindrù na
disku (obvykle prvních 524 MB), co¾ mù¾e vy¾adovat posunutí
stávajících  FAT nebo NTFS oblastí.

</para>

   <sect3 id="lossless">
   <title>Zmìna rozdìlení disku beze ztráty dat</title>

<para>

Jedna z nejèastìj¹ích situací je pøidání Debianu na systém, kde u¾ je
DOS (pøípadnì Windows 3.1), Win32 (napøíklad Windows 95, 98, Me, NT,
2000, XP) nebo OS/2, ani¾ by se znièil pùvodní systém. Jak ji¾ bylo
øeèeno døíve, pokud se neprovedou jistá opatøení, povede zmen¹ování
diskového oddílu skoro jistì ke ztrátì dat.  Metoda, kterou zde
popí¹eme, sice nezaruèuje, ¾e nepøijdete o data, ale v praxi funguje
velice dobøe. Rozhodnì si ale vytvoøte <emphasis>zálohu</emphasis>
dat.

</para><para>

Nejprve se rozhodnìte, jak chcete disk rozdìlit. Postup v této
sekci rozdìlí jeden oddíl na dva. První bude obsahovat pùvodní
operaèní systém a druhý bude pro Debian. Bìhem instalace Debianu
budete mít pøíle¾itost druhou èást disku dále rozdìlit.

</para><para>

My¹lenka je taková, ¾e se ve¹kerá data pøesunou na zaèátek oddílu,
aby, a¾ se zmìní záznamy o rozdìlení disku, nedo¹lo ke ztrátì dat.
Dùle¾ité je, abyste mezi pøesunutím dat a zmìnou oddílu provedli co
nejménì operací. Sní¾íte tak mo¾nost zápisu nìjakého souboru do
volného místa na konci oblasti a tím vìt¹í kus se vám podaøí ukrojit
z pùvodního oddílu. 

</para><para>

Budete potøebovat program <command>fips</command>, který najdete na
svém debianím zrcadle v adresáøi <filename>tools</filename>.
Rozbalte archív a nakopírujte soubory
<filename>RESTORRB.EXE</filename>, <filename>FIPS.EXE</filename> a
<filename>ERRORS.TXT</filename> na systémovou disketu.
Systémová disketa se vytvoøí pøíkazem <command>sys a:</command>.
Program <command>fips</command> je doplnìn velmi kvalitním popisem,
který jistì oceníte v pøípadì, ¾e pou¾íváte pøi pøístupu na disk
kompresi dat nebo diskový mana¾er. Vytvoøte si systémovou disketu a
<emphasis>ne¾</emphasis> zaènete defragmentaci, pøeètìte si dokumentaci.

</para><para>

Dal¹ím krokem je pøesun dat na zaèátek oddílu. To umí program
<command>defrag</command>, je¾ je souèástí systému DOS od verze 6.0.
Dokumentace k programu <command>fips</command> obsahuje seznam jiných
programù, které mù¾ete k tomuto úkonu pou¾ít. Jestli¾e pou¾íváte
Windows 95 a vy¹¹í, musíte pou¾ít jejich verzi programu
<command>defrag</command>, ponìvad¾ verze pro DOS nezvládá souborový
systém VFAT, který obsahuje podporu dlouhých jmen u Windows 95 a vy¹¹ích.

</para><para>

Po ukonèení defragmentace disku, která mù¾e na vìt¹ích discích chvíli
trvat, zaveïte systém z pøipravené systémové diskety. Spus»te
<filename>a:\fips</filename> a postupujte podle nápovìdy.

</para><para>

Pokud s programem <command>fips</command> neuspìjete, mù¾ete zkusit
pøehr¹el jiných programù pro správu disku.

</para>
   </sect3>

   <sect3 id="partitioning-for-dos"><title>Vytváøení oddílù pro DOS</title>

<para>

Pøi vytváøení oddílù pro DOS nebo zmìnì jejich velikosti linuxovými
nástroji, pozorovali nìkteøí u¾ivatelé problémy s takto pøipravenými
oddíly. Nìkdy se jednalo o zhor¹ení výkonu, jindy se objevily èasté
potí¾e s programem <command>scandisk</command> nebo divné chyby
systémù DOS a Windows. 

</para><para>

Kdykoliv vytvoøíte nebo zmìníte velikost oddílu urèeného pro DOS, je
dobré vymazat prvních pár sektorù. Pøed spu¹tìním programu
<command>format</command> v systému DOS, proveïte z Linuxu
<informalexample><screen>

dd if=/dev/zero of=/dev/hdXX bs=512 count=4

</screen></informalexample>

</para>
   </sect3>
  </sect2>
