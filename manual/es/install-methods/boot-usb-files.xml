<?xml version="1.0" encoding="UTF-8"?>
<!-- original version: 64897 -->
<!-- revisado por nahoo, 7 noviembre 2004 -->
<!-- revisado por Rudy Godoy, 22 feb. 2005 -->
<!-- revisado por Igor Támara, 16 nov. 2008 -->
<!-- actualizado por elric, 11 Agosto 2010 -->

 <sect1 condition="bootable-usb" id="boot-usb-files">
 <title>Preparación de ficheros para el arranque desde un dispositivo de memoria USB</title>

<para>

Existen dos métodos para arrancar desde una memoria USB. El primero es
usar una memoria USB sólo para arrancar, y después
instalar completamente desde la red. El segundo consiste en copiar una imagen
de CD en la memoria USB y usarla como fuente de paquetes, posiblemente en
combinación con un sitio de réplica.

</para><para>

Para preparar una memoria USB, necesitará un sistema en el cual ya esté
corriendo GNU/Linux y con soporte para USB. En los sistemas GNU/Linux
actuales la memoria USB debería reconocerse automáticamente cuando la
inserta. Si no es así, compruebe que el módulo del núcleo usb-storage esté
cargado. Cuando se inserta una memoria USB, se mapeará a un dispositivo
llamado <filename>/dev/sdX</filename>, en el que <quote>X</quote> es una
letra entre la a y la z. Al ejecutar la orden <command>dmesg</command>
debería poder visualizar a qué dispositivo se mapea la memoria USB al
insertarla. Para escribir en la memoria, es posible que deba quitar el
seguro de protección contra escritura.

</para><warning><para>

¡Los procedimientos descritos en esta sección destruirán todo el contenido
del dispositivo! Asegúrese de elegir correctamente el nombre del dispositivo
para su memoria USB. Si usa el dispositivo incorrecto podría terminar
perdiendo toda la información de, por ejemplo, un disco duro.

</para></warning><para arch="x86">

Para preparar una memoria USB que sólo arranque el instalador y
después realice una instalación completa a través de la red, tendrá que
descargar la imagen <filename>mini.iso</filename> en el directorio
<filename>netboot</filename> (en la ubicación mencionada en
<xref linkend="where-files"/>), y escribir este fichero directamente en
la memoria USB, borrando el contenido actual.
Este método funcionará con memorias USB de baja capacidad, incluso de sólo
unos cuantos megabytes.

</para><para arch="x86">

Por ejemplo, si está usando un sistema GNU/Linux existente, puede
escribir el fichero <filename>mini.iso</filename> a la memoria
USB de la siguiente manera:

<informalexample><screen>
# cat mini.iso &gt; /dev/<replaceable>sdX</replaceable>
# sync
</screen></informalexample>

Si quiere añadir ficheros de firmware a una memoria USB preparada de
esta manera, primero obtenga los ficheros de firmware necesarios.
Para más información consulte <xref linkend="loading-firmware"/>.
A continuación, desconecte y vuelva a conectar la memoria USB. Ahora
debería ver dos particiones en eĺ. Por último, monte la segunda partición
y desempaquete en él los ficheros de firmware.

<informalexample><screen>
# mount /dev/<replaceable>sdX2</replaceable> /mnt
# cd /mnt
# tar zxvf <replaceable>/path/to/</replaceable>firmware.tar.gz
# cd /
# umount
</screen></informalexample>

</para><para>

Para preparar una memoria USV que instala los paquetes desde una imagen
de CDROM, use las imágenes de instalación en el
directorio <filename>hd-media</filename>. Puede usar tanto la
<quote>forma fácil</quote> o la <quote>forma flexible</quote> para copiar
la imagen en la memoria USB. Este método de instalación también requerirá
descargar la imagen del CD. La imagen de instalación y la imagen del CD
deben coincidir con la version del &d-i;. Si no coinciden es muy probable
que surjan errores<footnote>

<para>
El mensaje que se presenta más comunmente es que no se pudo encontrar los
módulos del núcleo. Esto significa que la versión del módulo del núcleo
udebs incluído en la imagen del CD difiere de la versión del núcleo que
está en ejecución.
</para>

</footnote> durante la instalación.

</para><para>

Note que el dispositivo USB, deberá tener por lo menos una capacidad de 256 MB
(se pueden realizar configuraciones con menos capacidad, tal como se indica en
<xref linkend="usb-copy-flexible"/>).

</para>

  <sect2 id="usb-copy-easy">
  <title>Copiado de los ficheros &mdash; la forma fácil</title>
<para>

Existe un fichero «todo en uno» <filename>hd-media/boot.img.gz</filename>
que contiene todos los ficheros del instalador(incluyendo el núcleo)
<phrase arch="x86">al igual que <classname>syslinux</classname> y su fichero
de configuración</phrase>
<phrase arch="powerpc">al igual que <classname>yaboot</classname> y su
fichero de configuración</phrase>.

</para><para>

Tenga en cuenta que aunque es conveniente, este método tiene una gran
desventaja: el tamaño lógico del dispositivo se limitará a 256 MB,
incluso si la capacidad de la memoria USB es mayor. Si quiere contar
con la capacidad  completa de la memoria posteriormente para un uso
diferente, tendrá que reparticionarla y crearle un nuevo sistema de
archivos. Otra desventaja es que no puede copiar una imagen completa
de CD en la memoria USB, solamente imágenes netinst o de tarjeta de
presentación.

</para><para arch="x86">

Para usar esta imagen sencillamente extraígala directamente en la
memoria USB:

<informalexample><screen>
# zcat boot.img.gz &gt;/dev/<replaceable>sdX</replaceable>
</screen></informalexample>

</para><para arch="powerpc">

Cree una partición del tipo «Apple_Bootstrap» en su dispositivo
USB utilizando la orden <userinput>C</userinput> de
<command>mac-fdisk</command> y extraiga la imagen directamente
a éste:

<informalexample><screen>
# zcat boot.img.gz &gt;/dev/<replaceable>sdX2</replaceable>
</screen></informalexample>

</para><para>

Después de esto, monte la memoria USB
<phrase arch="x86">(<userinput>mount
/dev/<replaceable>sdX</replaceable> /mnt</userinput>),</phrase>
<phrase arch="powerpc">(<userinput>mount
/dev/<replaceable>sdX2</replaceable> /mnt</userinput>),</phrase>
que ahora tendrá un sistema de ficheros
<phrase arch="x86">FAT</phrase>
<phrase arch="powerpc">HFS</phrase>
en ella, y copie una imagen ISO «netinst» o «bussinesscard» de Debian
sobre la memoria USB.
Desmonte el dispositivo USB (<userinput>umount /mnt</userinput>) y habrá
terminado.

</para>
  </sect2>

  <sect2 id="usb-copy-flexible">
  <title>Copiado de los ficheros &mdash; la forma flexible</title>
<para>

Si desea más flexibilidad o simplemente le gusta saber que ocurre,
podría usar el siguiente método para colocar los ficheros en su
dispositivo USB. Una ventaja de este método es que &mdash; si la 
capacidad de su memoria USB es lo suficientemente grande &mdash; 
tendrá la opción de copiar una imagen completa de CD en ella.

</para>

&usb-setup-x86.xml;
&usb-setup-powerpc.xml;

   </sect2>

   <!-- TODO: doesn't this section belong later? -->
   <sect2 arch="x86">
   <title>Arranque con la memoria USB</title>

<warning><para>

Si su sistema rehúsa arrancar desde el dispositivo USB, éste podría
contener un registro de arranque maestro (MBR) inválido. Para
corregirlo, use la orden <command>install-mbr</command> del
paquete <classname>mbr</classname>:

<informalexample><screen>
# install-mbr /dev/<replaceable>sdX</replaceable>
</screen></informalexample>

</para></warning>
  </sect2>
 </sect1>
