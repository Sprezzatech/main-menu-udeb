<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- original version: 27345 -->
<!-- traducido por jfs, 20 febrero 2005 -->
<!-- revisado por rudy, 24 feb. 2004 -->

<!-- Nota del traductor : USB stick = lápiz USB -->

   <sect3 arch="powerpc">
   <title>Particionado de memoria USB en &arch-title;</title>
<para>

La mayoría de los dispositivos de memoria USB no vienen preconfigurados de
forma que «Open Firmware» pueda arrancar desde éstos, así que tendrá que
reparticionarlo. En los sistemas Mac ejecute
<userinput>mac-fdisk /dev/sda</userinput>, inicialice una nueva
tabla de particiones con la orden <userinput>i</userinput>
y cree una nueva partición del tipo «Apple_Bootstrap» con la orden
<userinput>C</userinput>. Tenga en cuenta que la primera «partición»
sera la propia tabla de particiones. Una vez hecho esto escriba:

<informalexample><screen>
$ hformat /dev/<replaceable>sda2</replaceable>
</screen></informalexample>

Asegúrese de usar el nombre de dispositivo correspondiente a su
memoria USB. Puede encontrar la orden <command>hformat</command>
en el paquete Debian <classname>hfsutils</classname>.

</para><para>

Para poder arrancar el núcleo una vez haya arrancado desde la memoria USB
tendrá que poner un gestor de arranque en el mismo. El gestor
de arranque <command>yaboot</command> puede instalarse en cualquier
sistema de ficheros HFS y puede reconfigurarse simplemente editando
un fichero de texto. Puede utilizar cualquier sistema operativo que
tenga soporte del sistema de ficheros HFS para hacer cambios a la
configuración del gestor de arranque.

</para><para>

La herramienta <command>ybin</command> normal que viene incluida con
<command>yaboot</command> aún no reconoce dispositivos de almacenamiento
USB, así que deberá instalar <command>yaboot</command> manualmente
utilizando para ello las herramientas <classname>hfsutils</classname>.
Escriba:

<informalexample><screen>
$ hmount /dev/sda2
$ hcopy -r /usr/lib/yaboot/yaboot :
$ hattrib -c UNIX -t tbxi :yaboot
$ hattrib -b :
$ humount
</screen></informalexample>

De nuevo, asegúrese de usar el nombre de dispositivo correcto.
La partición no puede estar montada durante este procedimiento.
El procedimiento descrito guarda el gestor de arranque en la
partición y utiliza las herramientas de HFS para marcarlo de forma
que «Open Firmware» pueda cargarlo. Una vez hecho esto debe preparar
su memoria USB con las herramientas habituales de Unix.

</para><para>

Monte las particiones (<userinput>mount /dev/sda2 /mnt</userinput>) y
copie los siguientes ficheros del archivo de Debian al dispositivo de memoria:

<itemizedlist>
<listitem><para>

<filename>vmlinux</filename> (binario del núcleo)

</para></listitem>
<listitem><para>

<filename>initrd.gz</filename> (imagen inicial de memoria ram)

</para></listitem>
<listitem><para>

<filename>yaboot.conf</filename> (fichero de configuración de yaboot)

</para></listitem>
<listitem><para>

<filename>boot.msg</filename> (mensaje de arranque opcional)

</para></listitem>
<listitem><para>

Módulos del núcleo opcionales

</para></listitem>
</itemizedlist>

</para><para>

El fichero de configuración <filename>yaboot.conf</filename> debería
tener las siguientes líneas:

<informalexample><screen>
default=install
root=/dev/ram

message=/boot.msg

image=/vmlinux
        label=install
        initrd=/initrd.gz
        initrd-size=10000<phrase condition="sarge">
        append="devfs=mount,dall --"</phrase>
        read-only
</screen></informalexample>

Tenga en cuenta que puede tener que incrementar el parámetro
<userinput>initrd-size</userinput> en base a la imagen que vaya
a arrancar.

</para>
   </sect3>
