<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- original version: 56427 -->
<!-- Revisado por Rudy Godoy, 22 feb. 2005 -->
<!-- Revisado por Igor Tamara, enero 2007 -->
<!-- Revisado por ikks, nov 22 2008 -->

   <sect3 id="mdcfg">
   <title>Configuración de dispositivos multidisco (RAID)</title>
<para>

Si tiene más de un disco duro<footnote><para>

Siendo honestos, puede construir un MD (Metadispositivo) incluso con
particiones de un mismo disco físico, pero no tiene ninguna ventaja.

</para></footnote> en su ordenador, con <command>mdcfg</command> puede
configurar sus discos para un mayor rendimiento y/o una mayor seguridad de los
datos. El resultado se denomina <firstterm>Dispositivo multidisco</firstterm>
(o como su variante más conocida <firstterm>RAID</firstterm>).

</para><para>

Básicamente el metadispositivo es un grupo de particiones de distintos discos
combinadas para formar un dispositivo <emphasis>lógico</emphasis>. Este
dispositivo puede usarse como una partición ordinaria (p.ej. puede darle
formato con <command>partman</command>, asignarle un punto de montaje, etc.).

</para><para>

Los beneficios obtenidos dependen del tipo de MD creado. Actualmente los tipos
soportados son:

<variablelist>
<varlistentry>

<term>RAID 0</term><listitem><para>

Su principal objetivo es el rendimiento. RAID 0 divide todos los datos de
entrada en <firstterm>franjas</firstterm> y los distribuye igualmente por
cada disco en el sistema RAID. Esto puede aumentar la velocidad de las
operaciones de lectura/escritura, pero cuando falle un disco, perderá
<emphasis>todo</emphasis> (parte de la información todavía está en el
disco o discos que funcionan, la otra parte <emphasis>estaba</emphasis>
en el disco que falló).

</para><para>

El uso típico de RAID 0 en una partición para edición de vídeo.

</para></listitem>
</varlistentry>
<varlistentry>

<term>RAID 1</term><listitem><para>

Es adecuado para los casos en los que la fiabilidad sea lo primordial.
Consiste en varias (normalmente dos) particiones del mismo tamaño donde
cada partición contiene exactamente los mismos datos. Esto significa tres
cosas. Primero, si un disco falla, todavía tiene una copia de los datos en los
discos restantes. Segundo, sólo puede usar una fracción de la capacidad
disponible (con más precisión, el tamaño de la partición más pequeña del
sistema RAID). Tercero, la carga producida por la lectura de ficheros se
reparte entre los discos, lo que puede ampliar el rendimiento de algunos
servidores, como los servidores de ficheros, que tienden a tener más carga
de lecturas que escrituras.

</para><para>

Opcionalmente puede tener un disco de reserva en el sistema que tomará el lugar
del disco defectuoso en caso de fallo.

</para></listitem>
</varlistentry>
<varlistentry>

<term>RAID 5</term><listitem><para>

Es una buena elección entre velocidad, confiabilidad y redundancia
de datos. RAID 5 divide todos los datos de entrada en franjas y los
distribuye igualmente en todos los discos (similar a RAID 0), a excepción
de uno. A diferencia de RAID 0, RAID 5 también calcula la información de
<firstterm>paridad</firstterm>, la cual se escribe en el disco
restante. El disco de paridad no es estático (esto sería RAID 4), sino que
cambia periódicamente, de modo que la información de paridad se
distribuye entre todos los discos. Cuando falla uno de los
discos, la parte faltante de la información puede reconstruirse
desde la información existente y su paridad. Debe utilizar al menos
tres particiones activas para un sistema RAID 5.
Opcionalmente, puede tener un
disco de reserva, el cual se utilizará en lugar del primer disco
que falle dentro del array.

</para><para>

Como puede ver, RAID 5 tiene un grado similar de confiabilidad a
RAID 1 logrando menos redundancia. Por otro lado, podría ser un poco
más lento en operaciones de escritura que RAID 0 debido al cálculo
de la información de paridad.

</para></listitem>
</varlistentry>
<varlistentry>

<term>RAID 6</term><listitem><para>

Es pareceido al RAID 5 pero usa dos dispositivos de paridad en lugar de
uno solo.

</para><para>

Un arreglo RAID 6 puede sobrevivir a un daño de hasta dos discos.

</para></listitem>
</varlistentry>
<varlistentry>

<term>RAID 10</term><listitem><para>

Un arreglo RAID 10 combina divisiones (como en RAID 0) y espejo (como
en RAID 1). Crea <replaceable>n</replaceable> copias de los datos y los
distribuye transversalmente en las particiones de forma tal que ninguna
de las copias de datos estén en el mismo dispositivo.
El valor predeterminado para <replaceable>n</replaceable> es 2, pero
puede establecerse a otro en el modo experto.  La cantidad de particiones
usadas debe ser de por lo menos <replaceable>n</replaceable>.
El RAID 10 tiene diferentes disposiciones para distribuir las copias. En
principio se usa copias cercanas. Las copias cercanas tienen todas las
copias casi con el mismo corrimiento en todos los discos.  Las copias
lejanas tienen las copias en corrimientos distintos en los discos.  Los
corrimientos de las copias copian las franjas y no las copias
individuales.

</para><para>

Los RAID 10 buscan alcanzar la confiabilidad y redundancia evitando el
cálculo de paridad, que aveces es visto como un inconveniente.

</para></listitem>
</varlistentry>
</variablelist>

Resumiendo:

<informaltable>
<tgroup cols="5">
<thead>
<row>
  <entry>Tipo</entry>
  <entry>Dispositivos mínimos</entry>
  <entry>Dispositivo de reserva</entry>
  <entry>¿Soporta el fallo de un disco?</entry>
  <entry>Espacio disponible</entry>
</row>
</thead>

<tbody>
<row>
  <entry>RAID 0</entry>
  <entry>2</entry>
  <entry>no</entry>
  <entry>no</entry>
  <entry>Tamaño de la menor partición multiplicado por el número de dispositivos
  en el sistema RAID.</entry>
</row>

<row>
  <entry>RAID 1</entry>
  <entry>2</entry>
  <entry>opcional</entry>
  <entry>sí</entry>
  <entry>Tamaño de la menor partición en el sistema RAID.</entry>
</row>

<row>
  <entry>RAID 5</entry>
  <entry>3</entry>
  <entry>opcional</entry>
  <entry>sí</entry>
  <entry>
    Tamaño de la partición más pequeña multiplicada por el número de
    dispositivos en RAID menos uno.
  </entry>
</row>

<row>
  <entry>RAID 6</entry>
  <entry>4</entry>
  <entry>opcional</entry>
  <entry>sí</entry>
  <entry>
    Tamaño de la partición más pequeña multiplicado por (el número de
    dispositivos RAID menos dos)
  </entry>
</row>

<row>
  <entry>RAID 10</entry>
  <entry>2</entry>
  <entry>opcional</entry>
  <entry>sí</entry>
  <entry>
    Total de todas las particiones dividido en el númbero de
    porciones de copias (predeterminado a 2)
  </entry>
</row>

</tbody></tgroup></informaltable>

</para><para>

Si quiere saber más acerca de RAID, consulte el <ulink
url="&url-software-raid-howto;">CÓMO de RAID</ulink>.

</para><para>

Para crear un dispositivo MD necesita marcar todas las particiones que desea utilizar
para su uso con RAID (puede hacerlo con <command>partman</command> en el
menú <guimenu>Configuración de la partición</guimenu> donde debería seleccionar
<menuchoice> <guimenu>Utilizar como:</guimenu> <guimenuitem>volumen físico
para RAID</guimenuitem> </menuchoice>).

</para>
<note><para>

Asegúrese de que el sistema puede arrancar con el esquema de particiones
que ha planeado.  Usualmente será necesario crear un sistema de ficheros
separado para <filename>/boot</filename> cuando se usa RAID para el
sistema de ficheros raíz (<filename>/</filename>).
La mayoría de cargadores de arranque <phrase arch="x86">(incluyendo a lilo
 y grub)</phrase> soportan RAID 1 en espejo (¡sin franjas!), por lo tanto
es posible usar RAID 5 para <filename>/</filename> y RAID 1 para
<filename>/boot</filename>.

</para></note>
<warning><para>

El soporte para MD es una característica relativamente nueva del instalador.
Puede que experimente algún problema para algunos niveles RAID en
combinación con algunos gestores de arranque si intenta usar MD para el sistema
de ficheros raíz (<filename>/</filename>). Es posible que los usuarios
experimentados puedan solucionar estos problemas ejecutando algún paso de
configuración o instalación manualmente desde una interfaz de órdenes.

</para></warning><para>

A continuación, debe elegir <guimenuitem>Configurar RAID software</guimenuitem>
desde el menú principal de <command>partman</command>.
(El menú sólo aparecerá una vez haya marcado al menos una partición
para que se use como <guimenuitem>volumen físico para RAID</guimenuitem>.)
En la primera pantalla de <command>mdcfg</command> simplemente seleccione
<guimenu>Crear un dispositivo MD</guimenu>. Se le presentará una lista de tipos
de MD soportados, de los que debe elegir uno (p. ej. RAID 1). Los siguientes
pasos dependen del tipo de MD seleccionado.

</para>

<itemizedlist>
<listitem><para>

RAID 0 es simple &mdash; se le presentará una lista de particiones RAID
disponibles y únicamente tendrá que seleccionar las particiones que formarán el
MD.

</para></listitem>
<listitem><para>

RAID 1 es un poco más complejo. Primero, se le preguntará el número de
dispositivos activos y el número de dispositivos de reserva que formarán el
MD. A continuación, necesita seleccionar de la lista de particiones RAID
disponibles las que estarán activas y las que quedarán en reserva. El total de
las particiones seleccionadas debe ser igual al que se dio anteriormente.
No se preocupe. Si comete algún error y selecciona un número distinto de
particiones, &d-i; no le dejará continuar hasta que solucione el problema.

</para></listitem>
<listitem><para>

RAID 5 tiene un procedimiento de configuración similar al de RAID 1, con la
excepción que necesita usar por lo menos <emphasis>tres</emphasis>
particiones activas.

</para></listitem>
<listitem><para>

RAID 6 también tiene un procedimiento de configuración parecido a RAID 1
excepto que se necesita por lo menos <emphasis>four</emphasis> particiones
activas.

</para></listitem>
<listitem><para>

RAID 10 también tiene un procedimiento de configuración parecido a RAID1
excepto en el modo experto.  En modoexperto, el &d-i; le preguntará por
la disposición.  La disposición consta de dos partes.  La primera parte
es el tipo de disposición.  Puede ser <literal>n</literal> (para copias
cercanas), <literal>f</literal> (para copias lejanas), u
<literal>o</literal> (para copias con corrimientos).  La segunda parte
es el número de copias que se desea hacer de los datos.  Debe haber por
lo menos tantos dispositivos activos como copias estarían distribuidas
en diferentes discos.

</para></listitem>
</itemizedlist>

<para>

Es perfectamente posible tener varios tipos de MD a la vez. Por ejemplo, si
tiene tres discos duros de 200 GB dedicados para el MD, cada uno con dos
particiones de 100 GB, puede combinar la primera partición de los tres discos
en un RAID 0 (una partición rápida de 300 GB para edición de vídeo) y usar las
otras tres (2 activas, 1 de reserva) en un RAID 1 (una partición bastante
segura de 100 GB para <filename>/home</filename>).

</para><para>

Después de configurar los MD a su gusto, elija
<guimenuitem>Terminar</guimenuitem> en <command>mdcfg</command> para volver
a <command>partman</command> y crear los sistemas de ficheros en sus nuevos
MD y asignarles los atributos habituales, como los puntos de montaje.

</para>
   </sect3>
