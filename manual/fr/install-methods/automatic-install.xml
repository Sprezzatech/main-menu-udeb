<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- original version: 32424 -->

 <sect1 id="automatic-install">
 <title>Installation automatisée</title>
<para>

Pour installer Debian sur de nombreux ordinateurs, il est possible
d'automatiser complètement l'installation en utilisant les 
paquets Debian suivants&nbsp;:
<classname>fai</classname> (qui utilise un serveur d'installation),
<classname>replicator</classname>,
<classname>systemimager</classname>,
<classname>autoinstall</classname> et
l'installateur Debian lui-même.

</para>
 
<sect2 id="preseed">
<title>Installation automatique avec l'installateur Debian</title>

<para>
L'installateur Debian peut automatiser des installations grâce à des fichiers
de préconfiguration. Un fichier de préconfiguration peut se trouver sur le
réseau ou sur un support amovible. Il sert à répondre aux questions qui seront
posées pendant l'installation.
</para>
<para condition="etch">
Une bonne documentation, avec un fichier d'exemple que l'on peut modifier,
se trouve dans l'<xref linkend="appendix-preseed"/>
</para>
<para condition="sarge">
La plupart des dialogues de l'installateur Debian peuvent être
préconfigurés de cette manière. Il y a cependant des exceptions
notables. On peut partitionner tout un disque ou partitionner seulement
une partie de l'espace disponible&nbsp;; on ne peut pas utiliser des
partitions existantes .
On ne peut pas installer RAID et LVM en utilisant cette méthode.
Il n'est pas possible non plus de
préconfigurer les paramètres des modules du noyau, à l'exception des
modules réseau.
</para>

<para condition="sarge">
Le format de ce fichier est celui de la commande debconf-set-selections. 
Un exemple fonctionnel et bien documenté, que vous pouvez modifier, se trouve 
dans <xref linkend="example-preseed"/>.
</para>

<para condition="sarge">
Une façon simple de créer le fichier complet est de faire une installation,
puis d'utiliser la commande <filename>debconf-get-selections</filename> qui 
se trouve dans le paquet <classname>debconf-utils</classname> pour copier les 
données de debconf et cdebconf dans /var/log/debian-installer/cdebconf et les 
mettre dans un seul fichier&nbsp;:

<informalexample><screen>
$ debconf-get-selections --installer &gt; <replaceable>fichier</replaceable>
$ debconf-get-selections &gt;&gt; <replaceable>fichier</replaceable>
</screen></informalexample>

Cependant, un fichier créé de cette manière possédera des éléments qu'on ne
doit pas préconfigurer&nbsp;; le fichier dans <xref linkend="example-preseed"/>
est un meilleur point de départ pour la plupart des utilisateurs.
</para>
<para condition="sarge">
Une fois que vous avez créé ce fichier de préconfiguration, vous pouvez le
modifier, le placer sur un serveur web ou le copier sur le support de
l'installateur. Mais, quelque soit sa place, vous devez dire à l'installateur
de l'utiliser au moment de l'amorçage.
</para>
<para condition="sarge">
Pour que l'installateur utilise un fichier de préconfiguration sur le réseau,
il faut ajouter preseed/url=http://url/to/preseed.cfg aux paramètres 
d'amorçage du noyau. Bien sûr, la préconfiguration ne fonctionnera pas avant 
que l'installateur n'ait installé le réseau et récupéré le fichier&nbsp;; 
le mieux est que l'installateur utilise DHCP et installe le réseau sans poser 
de questions. On peut aussi régler la priorité à «&nbsp;critique&nbsp;» pour
éviter toute question pendant l'installation du réseau.
Voyez <xref linkend="installer-args"/>.
</para>
<para condition="sarge">
Pour mettre un fichier de préconfiguration sur un cédérom, il faut recréer
l'image ISO et y ajouter le fichier. Voyez la page de manuel de mkisofs.
Vous pouvez aussi mettre le fichier de préconfiguration sur une disquette et
utiliser preseed/file=/floppy/preseed.cfg
</para>
<para arch="i386" condition="sarge">
Si vous voulez amorcer à partir d'une clé USB, vous pouvez copier le fichier de
préconfiguration sur le système de fichiers de la clé, modifier le fichier
syslinux.cfg et y ajouter preseed/file=/hd-media/preseed.cfg pour les 
paramètres d'amorçage du noyau.
</para>
</sect2>
</sect1>

