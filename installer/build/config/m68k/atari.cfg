MEDIUM_SUPPORTED = nativehd floppy

# The version of the kernel to use.
KERNELMAJOR = 2.2
KERNELVERSION = 2.4.26-$(SUBARCH) 2.2.25-$(SUBARCH)
KERNEL_FLAVOUR = di
KERNELIMAGEVERSION = $(KERNELVERSION)
KERNELNAME = $(foreach ver,$(KERNELVERSION),vmlinuz-$(ver))

VERSIONED_SYSTEM_MAP = t

USERDEVFS = t

EXTRAS = console-keymaps-$(SUBARCH)

#TARGET = bootstra.prg bootargs rawwrite.ttp $(INITRD) $(KERNEL)

# atari-bootstrap stuff

.PHONY: bootstra.prg
bootstra.prg: /usr/share/atari-bootstrap/ataboot.ttp.gz 
	mkdir -p $(SOME_DEST)
	gzip -cd $< > $(SOME_DEST)/$@
	./update-manifest $(SOME_DEST)/$@ "m68k atari bootstrap program"

.PHONY: bootstra-bootp.prg
bootstra-bootp.prg: /usr/share/atari-bootstrap/ataboot-bootp.ttp.gz 
	mkdir -p $(SOME_DEST)
	gzip -cd $< > $(SOME_DEST)/$@
	./update-manifest $(SOME_DEST)/$@ "m68k atari bootstrap with bootp program"

.PHONY: bootargs
	echo "-s -k linux -r initrd.gz root=/dev/ram video=keep ramdisk_size=20000" > $(SOME_DEST)/$@
	./update-manifest $(SOME_DEST)/$@ "m68k atari default bootstrap settings"

.PHONY: rawwrite.ttp
rawwrite.ttp: /usr/share/atari-bootstrap/rawwrite.ttp.gz 
	mkdir -p $(SOME_DEST)
	gzip -cd $< > $(SOME_DEST)/$@
	./update-manifest $(SOME_DEST)/$@ "m68k atari floppy writing program"

