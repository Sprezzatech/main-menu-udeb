
.PHONY: tftplilo.conf
tftplilo.conf: 
	mkdir -p $(SOME_DEST)
	cp boot/m68k/vme-tftplilo.conf $(SOME_DEST)/$@
	./update-manifest $(SOME_DEST)/$@ $(MANIFEST-CONFIG)

.PHONY: tftplilo.txt
tftplilo.txt: 
	mkdir -p $(SOME_DEST)
	cp boot/m68k/vme-tftplilo.txt $(SOME_DEST)/$@
	./update-manifest $(SOME_DEST)/$@ $(MANIFEST-DOCS)

.PHONY: tftplilo.bvme
tftplilo.bvme: /boot/tftplilo.bvme
	mkdir -p $(SOME_DEST)
	cp $< $(SOME_DEST)/$@
	./update-manifest $(SOME_DEST)/$@ $(MANIFEST-TFTP)

.PHONY: tftplilo.mvme
tftplilo.mvme: /boot/tftplilo.mvme
	mkdir -p $(SOME_DEST)
	cp $< $(SOME_DEST)/$@
	./update-manifest $(SOME_DEST)/$@ $(MANIFEST-TFTP)

.PHONY: arch_boot_screens
arch_boot_screens:

.PHONY: arch_boot_floppy
arch_boot_floppy: 
	mkdir $(TREE)boot
	cp boot/m68k/vme-vmelilo.conf-floppy $(TREE)boot/etc/vmelilo.conf
	cp $(shell echo $(TEMP_KERNEL) | cut -d' ' -f 1) $(TREE)boot/linux
	./makelabel $(DISK_LABEL) $(BUILD_DATE) > $(TREE)boot/disk.lbl
	genext2fs -d $(TREE)boot -b $(FLOPPY_SIZE) -r 0 $(TEMP_BOOT)
	mount -t ext2 -o loop=/dev/loop3 $(TEMP_BOOT) $(TREE)boot
	vmelilo -f -a $(VMEARCH) -b /dev/null -w $(TREE)boot -d /dev/loop3
	umount $(TREE)boot
	$(if $(GZIPPED),gzip -v9f $(TEMP_BOOT))

.PHONY: arch_root_floppy
arch_root_floppy: 
	mkdir $(TREE)root
	cp $(TEMP_INITRD) $(TREE)root/root.bin
	./makelabel $(DISK_LABEL) $(BUILD_DATE) > $(TREE)root/disk.lbl
	genext2fs -d $(TREE)root -b $(FLOPPY_SIZE) -r 0 $(TEMP_ROOT)
	$(if $(GZIPPED),gzip -v9f $(TEMP_ROOT))

.PHONY: arch_boot_cdrom
arch_boot_cdrom: 
	mkdir $(TREE)boot
	cp boot/m68k/vme-vmelilo.conf-floppy $(TREE)boot/etc/vmelilo.conf
	cp $(shell echo $(TEMP_KERNEL) | cut -d' ' -f 1) $(TREE)boot/linux
	cp $(TEMP_INITRD) $(TREE)boot/root.bin
	./makelabel $(DISK_LABEL) $(BUILD_DATE) > $(TREE)boot/disk.lbl
	genext2fs -d $(TREE)boot -b $(FLOPPY_SIZE) -r 0 $(TEMP_BOOT)
	mount -t ext2 -o loop=/dev/loop3 $(TEMP_BOOT) $(TREE)boot
	vmelilo -f -a $(VMEARCH) -b /dev/null -w $(TREE)boot -d /dev/loop3
	umount $(TREE)boot
	$(if $(GZIPPED),gzip -v9f $(TEMP_BOOT))

