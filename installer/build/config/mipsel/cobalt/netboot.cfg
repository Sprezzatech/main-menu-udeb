MEDIA_TYPE = netboot image

TARGET = $(INITRD) $(KERNEL) $(DEST)/default.colo $(DEST)/vmlinux.gz $(DEST)/vmlinux_RAQ.gz $(DEST)/vmlinux_raq-2800.gz
EXTRANAME = $(MEDIUM)/

MANIFEST-INITRD = "initrd for Cobalt machines"
MANIFEST-KERNEL = "kernel image for Cobalt machines"

# Add a colo binary plus symlinks
$(DEST)/vmlinux.gz:
	cp /boot/vmlinux.gz $@
	./update-manifest $@ "Cobalt boot loader"
	ln -s . $(DEST)/boot

$(DEST)/vmlinux_RAQ.gz:
	ln -s vmlinux.gz $@

$(DEST)/vmlinux_raq-2800.gz:
	ln -s vmlinux.gz $@

# CoLo configuration file for TFTP
$(DEST)/default.colo:
	install -m 644 boot/mipsel/colo.tftp $@
	./update-manifest $@ "Cobalt TFTP boot configuration script"
