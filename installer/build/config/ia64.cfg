# How big a floppy image should I make? (in kilobytes)
FLOPPY_SIZE = 10240

MEDIUM_SUPPORTED = cdrom netboot miniiso

# The version of the kernel to use.
KERNELMAJOR = 2.4
KERNELVERSION = 2.4.25-itanium-smp
KERNEL_FLAVOUR = di
KERNELNAME = vmlinuz
KERNELIMAGEVERSION = $(KERNELVERSION)

# The DOS volume id to use for DOS floppies. This is a 32 bit hexidecimal
# number.
DOS_VOLUME_ID = deb00001
# The DOS volume label to use for DOS floppies. This is a 11 character
# string.
DOS_VOLUME_LABEL = "Debian Inst"

# Create a bootable floppy image.
# 1. make a dos filesystem image
# 2. copy over kernel, initrd
# 3. copy over elilo files
.PHONY: arch_boot
arch_boot:
	dd if=/dev/zero of=$@.new bs=1k count=$(FLOPPY_SIZE)
	mkfs.msdos -i $(DOS_VOLUME_ID) -n $(DOS_VOLUME_LABEL) -C $(TEMP_BOOT) $(FLOPPY_SIZE)

	mmd -i$(TEMP_BOOT) ::/efi
	mmd -i$(TEMP_BOOT) ::/efi/boot
	mcopy -i$(TEMP_BOOT) $(TEMP_KERNEL) ::/linux
	mcopy -i$(TEMP_BOOT) $(TEMP_INITRD) ::/initrd.gz
	mcopy -i$(TEMP_BOOT) /usr/lib/elilo/elilo.efi ::/efi/boot/bootia64.efi
	mcopy -i$(TEMP_BOOT) /usr/lib/elilo/elilo.efi ::/elilo.efi
	mcopy -i$(TEMP_BOOT) boot/ia64/elilo-cd.conf ::/elilo.conf
	mcopy -i$(TEMP_BOOT) boot/ia64/elilo-cd.conf ::/efi/boot/elilo.conf
	echo "elilo linux" | mcopy -i$(TEMP_BOOT) - ::/install.nsh

arch_boot_screens:
	
