MEDIA_TYPE = tape

TYPE = s390-tape

KERNELVERSION = $(KERNELMAJOR).$(KERNELMINOR)-1-s390-tape
KERNELNAME = vmlinuz-tape

EXTRANAME = $(MEDIUM)/

TARGET = $(TEMP_BOOT)

.PHONY: arch_boot
arch_boot:
	install -m 644 $(TEMP_INITRD) $(SOME_DEST)/$(EXTRANAME)initrd.debian
	./update-manifest $(SOME_DEST)/$(EXTRANAME)initrd.debian "initrd for tape ipl"
	install -m 644 $(TEMP_KERNEL) $(SOME_DEST)/$(EXTRANAME)kernel.debian
	./update-manifest $(SOME_DEST)/$(EXTRANAME)kernel.debian "kernel for tape ipl"
	(dd bs=1 count=8 && dd bs=1 skip=1 count=0 && printf "\007" && dd) < $(SOME_DEST)/$(EXTRANAME)kernel.debian > $(SOME_DEST)/$(EXTRANAME)kernel.debian-nolabel
	./update-manifest $(SOME_DEST)/$(EXTRANAME)kernel.debian-nolabel "kernel for tape ipl - nolabel"
	install -m 644 boot/s390/parmfile $(SOME_DEST)/$(EXTRANAME)parmfile.debian
	./update-manifest $(SOME_DEST)/$(EXTRANAME)parmfile.debian "parmfile for tape ipl"
