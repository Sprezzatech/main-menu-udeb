<?xml version="1.0" encoding="ISO-8859-2"?>
<!-- $Id$ -->
<!-- original version: 28672 -->

 <sect1 id="automatic-install">
 <title>Automatická Instalace</title>
<para>

Pokud spravujete více obdobných poèítaèù, mù¾ete vyu¾ít plnì
automatickou instalaci. Pøíslu¹né balíky se jmenují
<classname>fai</classname>,
<classname>replicator</classname>,
<classname>systemimager</classname>,
<classname>autoinstall</classname> a samozøejmì &d-i;

</para>

  <sect2 id="preseed">
  <title>debian-installer</title>
<para>

Instalaèní program Debianu podporuje automatické instalace pomocí
<firstterm>pøedkonfiguraèních</firstterm> souborù. Pøedkonfiguraèní
soubor obsahuje odpovìdi na otázky, které se &d-i; ptá bìhem
instalace. Tento soubor mù¾ete nahrát ze sítì nebo z vymìnitelného
média.

</para><para>

Touto metodou mù¾ete pøednastavit hodnoty pro vìt¹inu dialogù
v &d-i;, ale existuje nìkolik výjimek. Mù¾ete pou¾ít volné místo nebo
rozdìlit celý disk, ale nemù¾ete vyu¾ít stávající oblasti. Momentálnì
také nelze pøednastavit RAID a LVM. <phrase condition="sarge">S
výjimkou sí»ových modulù nelze nastavit ani parametry modulù
jádra.</phrase>

</para><para>

Pøedkonfiguraèní soubor má stejný formát jako pou¾ívá pøíkaz
<command>debconf-set-selections</command>. Dobøe dokumentovaný funkèní
pøíklad takového souboru naleznete v dodatku <xref
linkend="example-preseed"/>. Dal¹í mo¾ností je projít ruèní instalací
a poté pøíkazem <command>debconf-get-selections</command> (z balíku
<classname>debconf-utils</classname>) ulo¾it databáze debconfu
a cdebconfu (<filename>/var/log/debian-installer/cdebconf</filename>)
do jediného souboru:

<informalexample><screen>
<prompt>$</prompt> <userinput>debconf-get-selections --installer &gt; <replaceable>soubor</replaceable></userinput>
<prompt>$</prompt> <userinput>debconf-get-selections &gt;&gt; <replaceable>soubor</replaceable></userinput>
</screen></informalexample>

Takto vytvoøený soubor v¹ak bude obsahovat polo¾ky, které by nemìly
být pøednastaveny a ty mohou zpùsobit problémy. Soubor z dodatku
<xref linkend="example-preseed"/> je pro vìt¹inu u¾ivatelù lep¹í
volba.

</para><para>

Pøedkonfiguraèní soubor pak mù¾ete upravit dle potøeb a nahrát na
webový server nebo umístit na zavádìcí média &d-i;u.  V obou pøípadech
v¹ak budete muset sdìlit instalaènímu programu, kde má soubor hledat.

</para><para>

Aby se pøedkonfiguraèní soubor stáhl ze sítì, pøidejte k zavádìcím
parametrùm
<userinput>preseed/url=http://url/k/preseed.cfg</userinput>.  Je
zøejmé, ¾e pøedkonfigurace zaène fungovat a¾ poté, co zprovozníte
sí». Z tohoto pohledu je dobré, kdy¾ mù¾ete nastavit sí» pøes DHCP bez
zbyteèných otázek. Chcete-li potlaèit otázky bìhem konfigurace sítì,
nastavte prioritu otázek na kritickou. Viz <xref
linkend="installer-args"/>.

</para><para>

Pøi umístìní pøedkonfiguraèního souboru na CD budete muset vytvoøit
nový ISO obraz CD. Podrobnosti naleznete v manuálové stránce
<citerefentry> <refentrytitle>mkisofs</refentrytitle>
<manvolnum>8</manvolnum> </citerefentry>. Volitelnì mù¾ete soubor
umístit na disketu a pou¾ít
<userinput>preseed/file=/floppy/preseed.cfg</userinput>.

</para><para arch="i386">

Jestli¾e zavádíte z USB klíèenky, jednodu¹e nakopírujte
pøedkonfiguraèní soubor na její souborový systém a upravte soubor
<filename>syslinux.cfg</filename>, aby k zavádìcím parametrùm jádra
pøidal <userinput>preseed/file=/hd-media/preseed.cfg</userinput>.

</para>

   <sect3 condition="etch">
   <title>Pou¾ití pøednastavení pro zmìnu výchozí hodnoty</title>
<para>

Pomocí pøednastavení je mo¾né zmìnit výchozí odpovìï na otázku
a zároveò tuto otázku zobrazit. (Tj. instalace automaticky nepokraèuje
a èeká na potvrzení od u¾ivatele, ov¹em s novou pøednastavenou
hodnotou.) Dosáhnete toho tak, ¾e po nastavení hodnoty zmìníte pøíznak
<firstterm>seen</firstterm> na hodnotu <quote>false</quote>.

<informalexample><screen>
d-i foo/bar string hodnota
d-i foo/bar seen false
</screen></informalexample>

</para>
   </sect3>
  </sect2>
 </sect1>
