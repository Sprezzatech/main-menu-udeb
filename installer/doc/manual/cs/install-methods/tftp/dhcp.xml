<?xml version="1.0" encoding="ISO-8859-2"?>
<!-- $Id$ -->
<!-- original version: 18626 -->

  <sect2 condition="supports-dhcp" id="dhcpd">
   <title>Nastavení DHCP serveru</title>
<para>

Jednním ze svobodných DHCP serverù je ISC
<command>dhcpd</command>. &debian; jej obsahuje jako balík
<classname>dhcp</classname>. Následuje ukázka jednoduchého
konfiguraèního souboru (obvykle <filename>/etc/dhcpd.conf</filename>):

<informalexample><screen>

option domain-name "priklad.cz";
option domain-name-servers ns1.priklad.cz;
option subnet-mask 255.255.255.0;
default-lease-time 600;
max-lease-time 7200;
server-name "karel";

subnet 192.168.1.0 netmask 255.255.255.0 {
  range 192.168.1.200 192.168.1.253;
  option routers 192.168.1.1;
}

host clientname {
  filename "/tftpboot/tftpboot.img";
  server-name "karel";
  next-server servername;
  hardware ethernet 01:23:45:67:89:AB; 
  fixed-address 192.168.1.90;
}

</screen></informalexample>

Poznámka: novìj¹í (a preferovaný) balík <classname>dhcp3</classname>
pou¾ívá konfiguraèní soubor
<filename>/etc/dhcp3/dhcpd.conf</filename>.

</para><para>

V tomto pøíkladu máme jeden server jménem
<replaceable>karel</replaceable>, který obstarává práci DHCP a
TFTP serveru a také slou¾í jako brána do sítì. Ve svém nastavení si
musíte zmìnit alespoò doménové jméno, jméno serveru a hardwarovou
adresu klienta. Polo¾ka <replaceable>filename</replaceable> by mìla
obsahovat název souboru, který si klient stáhne pøes TFTP.

</para><para>

Po úpravách konfiguraèního souboru musíte restartovat
<command>dhcpd</command> pøíkazem <userinput>/etc/init.d/dhcpd
restart</userinput>.

</para>

   <sect3 arch="i386">
   <title>PXE zavádìní</title>
<para>
Dal¹í pøíklad souboru <filename>dhcp.conf</filename> tentokrát vyu¾ívá
metodu PXE (Pre-boot Execution Environment) protokolu TFTP.

<informalexample><screen>

option domain-name "priklad.cz";

default-lease-time 6048;
max-lease-time 604800;

allow booting;
allow bootp;

# Následující odstavec si musíte upravit dle skuteènosti
subnet 192.168.1.0 netmask 255.255.255.0 {
  range 192.168.1.200 192.168.1.253;
  option subnet-mask 255.255.255.0;
  option broadcast-address 192.168.1.255;
# adresa brány 
# (napøíklad pro pøístup k internetu)
  option routers 192.168.1.1;
# dns server, který chcete pou¾ít
  option domain-name-servers 192.168.1.3;
}

host tftpserver {
# ip adresa tftp serveru
  fixed-address 192.168.1.90;
# hardwarová adresa tftp serveru
  hardware ethernet 01:23:45:67:89:AB;
}

group {
 next-server 192.168.1.3;
 host tftpclient {
# hardwarová adresa tftp klienta
  hardware ethernet  00:10:DC:27:6C:15;
  filename "/tftpboot/pxelinux.0";
 }
}

</screen></informalexample>

Pøi PXE zavádìní není soubor <filename>pxelinux.0</filename> obraz
jádra, ale zavadìè (viz <xref linkend="tftp-images"/> dále v textu).

</para>
   </sect3>
  </sect2>
