<?xml version="1.0" encoding="ISO-8859-2"?>
<!-- $Id$ -->
<!-- original version: 27345 -->

   <sect3 arch="powerpc">
   <title>Rozdìlení USB zaøízení na &arch-title;</title>
<para>

Proto¾e vìt¹ina USB klíèenek nebývá pøipravena pro zavádìní pøes Open
Firmware, musíte klíèenku pøerozdìlit. Na Macintoshi spus»te pøíkaz
<userinput>mac-fdisk /dev/sda</userinput>, kde
<userinput>/dev/sda</userinput> je USB klíèenka. Nejprve musíte
inicializovat novou tabulku oblastí pøíkazem <userinput>i</userinput>
a pak mù¾ete vytvoøit novou oblast typu Apple_Bootstrap pøíkazem
<userinput>C</userinput>. (Poznámka: první <quote>oblast</quote> bude
v¾dy samotná tabulka oblastí.) Poté zadejte:

<informalexample><screen>
<prompt>$</prompt> <userinput>hformat /dev/<replaceable>sda2</replaceable></userinput>
</screen></informalexample>

Pøíkaz <command>hformat</command> je obsa¾en v balíku
<classname>hfsutils</classname>. Pozornì se pøesvìdèete, ¾e pou¾íváte
správný název zaøízení!

</para><para>

Aby se po zavedení z USB klíèenky spustilo jádro, nainstalujeme na
klíèenku zavadìè <command>yaboot</command>, který se umí nainstalovat
na HFS oblast. Zavadìè mù¾ete jednodu¹e konfigurovat úpravou textového
souboru, co¾ lze provést z libovolného operaèního sytému, který
podporuje souborový systém HFS.

</para><para>

Obvyklý nástroj <command>ybin</command>, je¾ je souèástí
<command>yaboot</command>u, zatím nepodporuje USB zaøízení, tak¾e
budete muset <command>yaboot</command> nainstalovat ruènì pomocí
nástrojù z balíku <classname>hfsutils</classname>. Za pøedpokladu, ¾e
je va¹e zvolená oblast <replaceable>/dev/sda2</replaceable>, zadejte:

<informalexample><screen>
<prompt>$</prompt> <userinput>hmount /dev/sda2</userinput>
<prompt>$</prompt> <userinput>hcopy -r /usr/lib/yaboot/yaboot :</userinput>
<prompt>$</prompt> <userinput>hattrib -c UNIX -t tbxi :yaboot</userinput>
<prompt>$</prompt> <userinput>hattrib -b :</userinput>
<prompt>$</prompt> <userinput>humount</userinput>
</screen></informalexample>

Tímto zapí¹ete zavadìè do dané oblasti a pomocí HFS nástrojù ji
oznaèíte tak, ¾e z ní bude Open Firmware schopný zavádìt. Bìhem
procedury nesmí být oblast pøipojená jiným zpùsobem. Poté mù¾ete
pøipravit zbytek klíèenky bì¾nými unixovými utilitami.

</para><para>

Pøipojte oblast (<userinput>mount /dev/sda2 /mnt</userinput>)
a nakopírujte na ni následující soubory:

<itemizedlist>
<listitem><para>

<filename>vmlinux</filename> (jádro)

</para></listitem>
<listitem><para>

<filename>initrd.gz</filename> (obraz ramdisku)

</para></listitem>
<listitem><para>

<filename>yaboot.conf</filename> (konfiguraèní soubor yabootu)

</para></listitem>
<listitem><para>

<filename>boot.msg</filename> (volitelná zavádìcí hlá¹ka)

</para></listitem>
<listitem><para>

volitelné jaderné moduly

</para></listitem>
</itemizedlist>

</para><para>

Konfiguraèní soubor <filename>yaboot.conf</filename> by mìl obsahovat
následující øádky:

<informalexample><screen>
default=install
root=/dev/ram

message=/boot.msg

image=/vmlinux
        label=install
        initrd=/initrd.gz
        initrd-size=10000<phrase condition="sarge">
        append="devfs=mount,dall --"</phrase>
        read-only
</screen></informalexample>

Mo¾ná budete muset zvý¹it hodnotu u parametru
<userinput>initrd-size</userinput>, proto¾e tato se mìní v závislosti
na obrazu, který zavádíte.

</para>
   </sect3>
