<?xml version="1.0" encoding="ISO-8859-2"?>
<!-- $Id$ -->
<!-- original version: 1.5 -->

 <sect1 id="mount-initialized">
 <title><quote>Pøipojit døíve inicializovanou oblast</quote></title>
<para>

Alternativou k <xref linkend="init-partition"/> je polo¾ka
<quote>Pøipojit døíve inicializovanou oblast</quote>. Vyu¾ijete ji pøi
obnovení pøede¹lé nedokonèené
instalace, nebo pokud pøipojujete oblasti, které u¾ byly
inicializovány, nebo které obsahují data, je¾ byste chtìli zachovat.

</para><para condition="supports-nfsroot">

Pokud instalujete bezdiskovou stanici, nastal okam¾ik, kdy
pøipojíte koøenovou oblast ze vzdáleného NFS serveru.
Cestu k serveru zadejte normální NFS syntaxí, konkrétnì:

<informalexample><screen>
<replaceable>jméno-serveru-nebo-IP</replaceable>:<replaceable>sdílená-cesta-na-serveru</replaceable>
</screen></informalexample>.

Pokud potøebujete pøipojit dal¹í souborové systémy, mù¾ete to
udìlat teï.

</para><para arch="m68k"> 

<replaceable>sdílená-cesta-na-serveru</replaceable> pro systémy BVM a
Motorola VMEbus by mìla být shodná s cestou uvedenou v souboru
<filename>tftplilo.conf</filename> umístìném na TFTP serveru.
Cesta obsahuje adresáø, který má linuxové jádro pøi startu pøipojit.
Standardní cesta v <filename>tftplilo.conf</filename> je
<filename>/nfshome/%C</filename>, kde <userinput>%C</userinput> je
nahrazeno IP adresou klientského poèítaèe.

</para><para condition="supports-nfsroot">

Pokud jste je¹tì nenastavili sí» podle <xref linkend="netcfg"/>, tak
výbìr instalace pøes NFS vás k tomu vyzve automaticky.

</para>

  <sect2 condition="supports-nfsroot">
  <title>Jak obejít chybu v bezdiskové instalaci</title>
<para>
<phrase condition="FIXME">FIXME: still applicable in debian-installer?</phrase>

Bohu¾el <command>boot-floppies</command> momentálnì nepodporují
zamykání souborù na koøenovém NFS svazku. Následující øádky vám
pomohou tuto chybu obejít.

</para><para>

Pøipravte si následující sekvenci pøíkazù, kterou povolíte zamykání na
NFS, a ulo¾te ji na NFS svazek. (Pøípadnì ji mù¾ete vytvoøit za bìhu
editorem <command>nano-tiny</command>.)

<informalexample><screen>
#!/bin/sh
mount /dev/hdc /instmnt  # za /dev/hdc nahraïte va¹i cd mechaniku
cd /target
mkdir x
cd x
for i in g/glibc/libc6 t/tcp-wrappers/libwrap0 p/portmap/portmap n/nfs-utils/nfs-common
do
  ar -x /instmnt/pool/main/$i''_*.deb
  zcat data.tar.gz | tar x
done
umount /instmnt
mkdir -p /var/lib/nfs
for i in portmap rpc.statd
do
  LD_LIBRARY_PATH=lib sbin/$i
done
</screen></informalexample>

</para><para>

A¾ po rozbalení základního systému (vèetnì) instalujte obvyklým
zpùsobem. Poté v¹ak nainstalujte balík
<classname>nfs-common</classname>:

<informalexample><screen>
$ umount /instmnt
$ chroot /target /bin/sh
$ apt-cdrom add
$ apt-get install nfs-common
</screen></informalexample>

</para><para>

Chybové hlá¹ky o chybìjícím adresáøi <filename>/proc</filename>
mù¾ete ignorovat, proto¾e <command>portmap</command> a
<command>statd</command> ji¾ bì¾í.

</para><para>

Budete potøebovat jádro se zapnutou volbou
<userinput>CONFIG_ROOT_NFS</userinput>, co¾ nesplòuje ¾ádné jádro z
na¹ich CD. Pokud takové jádro nemáte a nemù¾ete si jej vyrobit na
jiném poèítaèi, musíte si je pøipravit rovnou zde v 
<command>chroot</command>ovaném prostøedí:

<informalexample><screen>
$ apt-get install gcc make libc6-dev kernel-source-2.4.18 less screen links lynx wget ftp # atd.
</screen></informalexample>

</para><para>

Kdy¾ máte jádro pøipravené, nezapomeòte po sobì uklidit:

<informalexample><screen>
$ exit # z chrootnutého shellu
$ cd /
$ killall portmap rpc.statd
$ umount /target
</screen></informalexample>

</para><para>

Nyní restartujte poèítaè. Pokud nìco sel¾e, zaveïte z instalaèního CD,
pøipojte svazek NFS do <filename>/target</filename>, povolne zamykání
na NFS, pøesuòte se do nového prostøedí <command>chroot
/target</command>, proveïte zmìny, na které jste minule zapomìli,
ukliïte po sobì a restartujte poèítaè. Pokud se opìt nezadaøí, zkuste
to znovu. Hodnì ¹tìstí.

</para>
  </sect2>
 </sect1>
