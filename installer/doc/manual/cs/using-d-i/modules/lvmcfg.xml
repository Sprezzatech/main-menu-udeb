<?xml version="1.0" encoding="ISO-8859-2"?>
<!-- $Id$ -->
<!-- original version: 25496 -->

   <sect3 id="lvmcfg">
   <title>Nastavení mana¾era logických svazkù (LVM)</title>
<para>

Pracujete-li s poèítaèi na pozici správce systému nebo pokroèilého
u¾ivatele, jistì jste za¾ili situaci, kdy na jedné (zpravidla velmi
dùle¾ité) oblasti docházelo volné místo, zatímco jiná oblast jej mìla
nadbytek. Zpravidla pak nastoupilo mazání, pøesouvání a propojování
adresáøù pøes symbolické odkazy.

</para><para>

Abyste do budoucna pøede¹li popsané situaci, mù¾ete pou¾ít mana¾er
lofických svazkù (Logical Volume Manager). Co takový mana¾er dìlá?
Jednodu¹e øeèeno, spojí diskové oblasti (v ¾argonu LVM se nazývají
<firstterm>fyzické svazky</firstterm>) do virtuálního disku
(tzv. <firstterm>skupina svazkù</firstterm>), který pak mù¾ete
rozdìlit na virtuální oblasti (<firstterm>logické
svazky</firstterm>). Jak se tyto virtuální oblasti li¹í od tìch
fyzických, na kterých jsou vybudovány? Pointa je v tom, ¾e logické
svazky (a samozøejmì pod nimi le¾ící skupiny svazkù) se mohou
rozprostírat pøes nìkolik fyzických diskù.

</para><para>

Napøíklad nyní, kdy¾ si v¹imnete, ¾e potøebujete více místa na star¹í
160 gigabajtové oblasti s domovskými adresáøi, mù¾ete jednodu¹e
dokoupit nový 300GB disk, pøipojit jej ke stávající skupinì svazkù
a roz¹íøit logický svazek, který slou¾í jako oblast pro
<filename>/home</filename>. Výsledkem bude jedna velká, 460
gigabajtová oblast, která u¾ivatelùm zase chvíli vystaèí. Popsaný
pøíklad je samozøejmì hodnì zjednodu¹ený, ale pìknì nastiòuje vyu¾ití
LVM v praxi. Pokud jste jej je¹tì neèetli, mìli byste si projít <ulink
url="&url-lvm-howto;">LVM HOWTO</ulink>.

</para><para>

Nastavení LVM v instalaèním programu Debianu je pomìrnì jednoduché.
Nejprve musíte oznaèit fyzické oblasti, které mají být spravovány pøes
LVM. (To se provádí v <command>partman</command>u v menu
<guimenu>Nastavení oblasti</guimenu>, kde byste mìli nastavit polo¾ku
<guimenu>Pou¾ít jako:</guimenu> na hodnotu <guimenuitem>fyzický svazek
pro LVM</guimenuitem>.) Poté pøejdìte do komponenty
<command>lvmcfg</command> (buï pøímo z <command>partman</command>u
nebo z hlavního menu &d-i;u), kde uvidíte dvì hlavní menu:
<guimenuitem>Upravit skupiny svazkù (VG)</guimenuitem>
a <guimenuitem>Upravit logické svazky (LV)</guimenuitem>. Jak ji¾
název prvního menu napovídá, spravují se zde skupiny svazkù. Prakticky
to znamená mo¾nost:

<itemizedlist>
<listitem><para>

vytvoøit novou skupinu z dosud nevyu¾itých fyzických svazkù,

</para></listitem>
<listitem><para>

smazat skupinu svazkù a uvolnit tak fyzické svazky, ze kterých se
skupina skládá,

</para></listitem>
<listitem><para>

roz¹íøit skupinu svazkù o nevyu¾ité fyzické svazky

</para></listitem>
<listitem><para>

a naopak skupinu svazkù zmen¹it o nìkteré fyzické svazky a tudí¾ je
dát k dispozici jiným skupinám, nebo z nich
v <command>partman</command>u udìlat <quote>bì¾né</quote> oblasti.

</para></listitem>
</itemizedlist>

Menu <guimenuitem>Upravit logické svazky (LV)</guimenuitem> nabízí
pouze dvì mo¾nosti:

<itemizedlist>
<listitem><para>

vytvoøit logický svazek z volného místa ve skupinì svazkù

</para></listitem>
<listitem><para>

smazat logický svazek ze skupiny svazkù.

</para></listitem>
</itemizedlist>

</para><note><para>

Pøi vytváøení skupiny svazkù nebo logického svazku budete po¾ádáni
o zadání jejich názvu. Tyto názvy by mìly být krátké a výsti¾né,
proto¾e v bì¾ícím systému se podle tìchto názvù vytvoøí nová bloková
zaøízení v adresáøi <filename>/dev/</filename>, která se budou
pou¾ívat pro pøímý pøístup k daným logickým svazkùm. Tedy tam, kde by
se bì¾nì pou¾ilo napø. <filename>/dev/hda3</filename> se nyní pou¾ije
<filename>/dev/mapper/jmskupiny/jmsvazku</filename>. (Pìknì to bude
vidìt v souboru <filename>/etc/fstab</filename> nebo na výstupu
pøíkazù <command>mount</command> a <command>df</command>.)

</para></note><note arch="powerpc"><para>

Na Power Macintoshích neexistuje obecný zpùsob, jak identifikovat, ¾e
oblast obsahuje LVM data a díky tomu na nich nebude fungovat vý¹e
popsaný zpùsob vytváøení fyzických svazkù a skupin svazkù. Pokud jste
v¹ak obeznámeni s nízkoúrovòovými LVM nástroji, mù¾ete toto omezení
snadno obejít.

</para><para>

Nejprve byste mìli vytvoøit diskové oblasti pro LVM jako obvykle,
ov¹em v menu <guimenu>Nastavení oblasti</guimenu> vyberte
<menuchoice><guimenu>Pou¾ít jako:</guimenu>
<guimenuitem>nepou¾ívat</guimenuitem></menuchoice>, proto¾e mo¾nost
<menuchoice><guimenu>fyzický svazek</guimenu></menuchoice> nebude
dostupná. Nyní se musíte pøepnout do shellu na druhé virtuální konzoli
(viz <xref linkend="shell"/>) a ruènì vytvoøit fyzické svazky
a skupiny svazkù.

</para><para>

Pøíkazem <command>pvcreate</command> vytvoøte na ka¾dé LVM oblasti
fyzický svazek a následnì z tìchto svazkù vytvoøte pøíkazem
<command>vgcreate</command> po¾adované skupiny svazkù. Bìhem vytváøení
mù¾ete ignorovat ve¹keré chybové hlá¹ky ohlednì chybných kontrolních
souètù hlavièek metadat a chyb fsync(). Po vytvoøení skupin svazkù se
vra»te na první virtuální terminál a pøeskoète rovnou na menu
komponenty <command>lvmcfg</command>, kde ji¾ uvidíte své skupiny
svazkù, na kterých mù¾ete vytvoøit logické svazky jako obvykle.

</para></note><para>

A¾ budete s nastavením LVM spokojeni, vra»te se zpìt do
<command>partman</command>u, kde uvidíte v¹echny vytvoøené logické
svazky. Logické svazky se chovají jako obyèejné oblasti, tudí¾ u¾ asi
víte, co s nimi máte dìlat.<footnote><para>

Nápovìda: vytvoøit souborové systémy, vybrat pøípojné body, apod.

</para></footnote>

</para>
   </sect3>
