<!-- retain these comments for translator revision tracking -->
<!-- original version: 28672 -->


 <sect1 id="kernel-baking">
 <!-- <title>Compiling a New Kernel</title> -->
 <title>Compilazione di un nuovo kernel</title>

<para>

<!-- Why would someone want to compile a new kernel? It is often not
necessary since the default kernel shipped with Debian handles most
configurations. However, it is useful to compile a new kernel in order
to: -->

Perché qualcuno dovrebbe compilarsi un nuovo kernel? Spesso non è
necessario dato che il kernel inserito in Debian gestisce la
maggior parte delle configurazioni. Comunque può essere utile compilare
un nuovo kernel per poter:

<itemizedlist>
<listitem><para>

<!-- handle special hardware needs, or hardware conflicts with the pre-supplied
kernels -->

gestire hardware particolare o gestire conflitti hardware con kernel
preconfezionati

</para></listitem>
<listitem><para>

<!-- handle hardware or options not included in the stock kernel, such as
APM or SMP -->

gestire hardware o funzioni non incluse nel kernel normale, come APM
o SMP

</para></listitem>
<listitem><para>

<!-- optimize the kernel by removing useless drivers to speed up boot
time -->

ottimizzare il kernel rimuovendo i driver inutili in modo da velocizzare
l'avvio del sistema

</para></listitem>
<listitem><para>

<!-- use options of the kernel which are not supported by the default
kernel (such as high memory support) -->

usare le opzioni del kernel che non sono supportate dal kernel
predefinito (come il supporto per la memoria alta)

</para></listitem>
<listitem><para>

<!-- run an updated or development kernel -->

usare un kernel aggiornato o di sviluppo

</para></listitem>
<listitem><para>

<!-- impress your friends, try new things -->

impressionare gli amici o per provare cose nuove

</para></listitem>
</itemizedlist>

</para>

  <sect2>
  <!-- <title>Kernel Image Management</title> -->
  <title>Gestione dell'immagine del kernel</title>

<para>

<!-- Don't be afraid to try compiling the kernel.  It's fun and profitable. -->

Non ci si deve impaurire nel provare a compilare il kernel. È
divertente e utile.

</para><para>

<!-- To compile a kernel the Debian way, you need some packages:
<classname>kernel-package</classname>,
<classname>kernel-source-&kernelversion;</classname> (the most recent version
at the time of this writing), <classname>fakeroot</classname> and a
few others which are probably already installed (see
<filename>/usr/share/doc/kernel-package/README.gz</filename> for the
complete list). -->

Per compilare il kernel con il metodo seguito da Debian sono necessari
alcuni pacchetti: <classname>kernel-package</classname>,
<classname>kernel-source-&kernelversion;</classname> (la versione più
recente al momento della scrittura), <classname>fakeroot</classname>
e pochi altri che probabilmente sono già installati (si consulti
<filename>/usr/share/doc/kernel-package/README.gz</filename> per
l'elenco completo).

</para><para>

<!-- This method will make a .deb of your kernel source, and, if you have
non-standard modules, make a synchronized dependent .deb of those
too. It's a better way to manage kernel images;
<filename>/boot</filename> will hold the kernel, the System.map, and a
log of the active config file for the build. -->

Questo metodo crea un .deb dai sorgenti del kernel e, se si hanno dei
moduli non-standard, crea anche un .deb di questi moduli sincronizzato
con il precedente. Questo è il miglior modo di gestire le immagini del
kernel; in <filename>/boot</filename> vengono inseriti il kernel, il file
System.map e un log con le configurazioni attive durante la compilazione.

</para><para>

<!-- Note that you don't <emphasis>have</emphasis> to compile your kernel
the <quote>Debian way</quote>; but we find that using the packaging system
to manage your kernel is actually safer and easier.  In fact, you can get
your kernel sources right from Linus instead of
<classname>kernel-source-&kernelversion;</classname>, yet still use the
<classname>kernel-package</classname> compilation method. -->

Notare che <emphasis>non</emphasis> è obbligatorio compilare il kernel
<quote>alla Debian</quote>; ma l'uso del sistema di pacchetti per gestire
il kernel è realmente più sicuro e più semplice. In pratica si possono
anche reperire i sorgenti del kernel direttamente da Linus anziché da
<classname>kernel-source-&kernelversion;</classname> e comunque usare il
metodo di compilazione con <classname>kernel-package</classname>.

</para><para>

<!-- Note that you'll find complete documentation on using
<classname>kernel-package</classname> under
<filename>/usr/share/doc/kernel-package</filename>.  This section just
contains a brief tutorial. -->

Notare che è possibile trovare la documentazione completa sull'uso di
<classname>kernel-package</classname> in
<filename>/usr/share/doc/kernel-package</filename>. Questa sezione
contiene solo un breve manuale introduttivo.

</para><para>

<!-- Hereafter, we'll assume you have free rein over your machine and will
extract your kernel source to somewhere in your home directory<footnote> -->

D'ora in avanti si suppone che si abbia il controllo completo della
macchina e che i sorgenti del kernel siano da qualche parte all'interno
della propria home directory<footnote>

<para>

<!-- There are other locations where you can extract kernel sources and build
your custom kernel, but this is easiest as it does not require special
permissions. -->

Ci sono molti altri posti in cui è possibile estrarre i sorgenti del
kernel e compilare un kernel personalizzato, ma è molto più semplice
se questa operazione non richiede dei permessi speciali.

</para>

<!-- </footnote>. We'll also assume that your kernel version is
&kernelversion;. Make sure you are in the directory to where you want to
unpack the kernel sources, extract them using <userinput>tar xjf
/usr/src/kernel-source-&kernelversion;.tar.bz2</userinput> and change
to the directory <filename>kernel-source-&kernelversion;</filename>
that will have been created. -->

</footnote>. Si suppone anche che la versione del kernel sia
&kernelversion;. Assicurarsi di trovarsi nella directory in cui si vuole
scompattare i sorgenti del kernel, estrarli usando <userinput>tar xjf
/usr/src/kernel-source-&kernelversion;.tar.bz2</userinput> e cambiare la
directory corrente in <filename>kernel-source-&kernelversion;</filename>
che è stata appena creata.

</para><para>

<!-- Now, you can configure your kernel.  Run <userinput>make
xconfig</userinput> if X11 is installed, configured and being run; run
<userinput>make menuconfig</userinput> otherwise (you'll need
<classname>libncurses5-dev</classname> installed). Take the time to read
the online help and choose carefully. When in doubt, it is typically
better to include the device driver (the software which manages
hardware peripherals, such as Ethernet cards, SCSI controllers, and so
on) you are unsure about.  Be careful: other options, not related to a
specific hardware, should be left at the default value if you do not
understand them.  Do not forget to select <quote>Kernel module loader</quote>
in <quote>Loadable module support</quote> (it is not selected by default).
If not included, your Debian installation will experience problems. -->

Adesso si può configurare il kernel. Eseguire <userinput>make
xconfig</userinput> se X11 è installato, configurato e in esecuzione;
altrimenti eseguire <userinput>make menuconfig</userinput> (è necessario
che sia installato il pacchetto <classname>libncurses5-dev</classname>).
Prendersi tutto il tempo necessario per leggere l'aiuto in linea e
scegliere con attenzione; in caso di dubbi di solito è consigliabile
includere i driver dei dispositivi (il software che gestisce le
periferiche hardware come le schede Ethernet, i controller SCSI e così
via) se non si è sicuri. Attenzione: se non si capisce il significato
delle altre opzioni non legate a un hardware specifico si dovrebbero
lasciare al valore predefinito. Non ci si deve dimenticare di selezionare
<quote>Kernel module loader</quote> in <quote>Loadable module
support</quote> (normalmente non è selezionato), altrimenti il proprio
sistema Debian rischia di avere dei seri problemi.

</para><para>

<!-- Clean the source tree and reset the <classname>kernel-package</classname>
parameters.  To do that, do <userinput>make-kpkg clean</userinput>. -->

Ripulire i sorgenti e ripristinare i parametri di
<classname>kernel-package</classname> usando <userinput>make-kpkg
clean</userinput>.

</para><para>

<!-- Now, compile the kernel:
<userinput>fakeroot make-kpkg -revision=custom.1.0 kernel_image</userinput>.
The version number of <quote>1.0</quote> can be changed at will; this is just
a version number that you will use to track your kernel builds.
Likewise, you can put any word you like in place of <quote>custom</quote>
(e.g., a host name).  Kernel compilation may take quite a while, depending on
the power of your machine. -->

Adesso compilare il kernel con: <userinput>fakeroot make-kpkg
--revision=custom.1.0 kernel_image</userinput>. Il numero di versione
<quote>1.0</quote> può essere cambiato secondo le necessità;
questo è semplicemente il numero di versione che si può usare per
tener traccia delle compilazioni del kernel. Allo stesso modo si può
inserire qualsiasi parola al posto di <quote>custom</quote> (p.e. il
nome dell'host). La compilazione del kernel richiede un po' di tempo,
in base alla potenza della macchina.

</para><para condition="supports-pcmcia">

<!-- If you require PCMCIA support, you'll also need to install the
<classname>pcmcia-source</classname> package.  Unpack the gzipped tar file
as root in the directory <filename>/usr/src</filename> (it's important that
modules are found where they are expected to be found, namely,
<filename>/usr/src/modules</filename>).  Then, as root, do <userinput>make-kpkg
modules_image</userinput>. -->

Se si ha bisogno del supporto PCMCIA è necessario installare il
pacchetto <classname>pcmcia-source</classname>. Estrarre il file tar
compresso con gzip nella directory <filename>/usr/src</filename> (è
importante che i moduli si trovino esattamente dove il sistema si
aspetta che siano, ovvero in <filename>/usr/src/modules</filename>).
Poi, da root, eseguire <userinput>make-kpkg modules_image</userinput>.

</para><para>

<!-- Once the compilation is complete, you can install your custom kernel
like any package.  As root, do <userinput>dpkg -i
../kernel-image-&kernelversion;-<replaceable>subarchitecture</replaceable>_custom.1.0_&architecture;.deb</userinput>.
The <replaceable>subarchitecture</replaceable> part is an optional
sub-architecture,
<phrase arch="i386"> such as <quote>i586</quote>, </phrase>
depending on what kernel options you set.
<userinput>dpkg -i kernel-image...</userinput> will install the
kernel, along with some other nice supporting files.  For instance,
the <filename>System.map</filename> will be properly installed
(helpful for debugging kernel problems), and
<filename>/boot/config-&kernelversion;</filename> will be installed,
containing your current configuration set.  Your new
<classname>kernel-image-&kernelversion;</classname> package is also clever
enough to automatically use your platform's boot-loader to run an
update on the booting, allowing you to boot without re-running the
boot loader.  If you have created a modules package, e.g., if you have
PCMCIA, you'll need to install that package as well. -->

Finita la compilazione è possibile installare il proprio kernel
personalizzato come qualsiasi altro pacchetto. Da root eseguire
<userinput>dpkg -i ../kernel-image-&kernelversion;-<replaceable>sottoarchitettura</replaceable>_custom.1.0_&architecture;.deb</userinput>.
La parte <replaceable>sottoarchitettura</replaceable> è opzionale e
indica la sottoarchitettura,
<phrase arch="i386"> per esempio <quote>i586</quote>, </phrase>
in base alle opzioni del kernel sono state attivate.
<userinput>dpkg -i kernel-image...</userinput> installa il kernel più
alcuni file di supporto. Per esempio sono installati i file
<filename>System.map</filename> (utile per il debug del kernel) e
<filename>/boot/config-&kernelversion;</filename> che contiene la
configurazione. Il nuovo pacchetto
<classname>kernel-image-&kernelversion;</classname> è anche in grado
di riconoscere, in base alla piattaforma, il bootloader ed eseguire
un aggiornamento in modo da poter riavviare la macchina senza dover
rieseguire il bootloader. Se si è creato anche un pacchetto con i
moduli, per esempio se si usa PCMCIA, è necessario installare anche
questo pacchetto.

</para><para>

<!-- It is time to reboot the system: read carefully any warning that the
above step may have produced, then <userinput>shutdown -r now</userinput>. -->

Adesso si deve riavviare il sistema: leggere attentamente tutti gli
avvertimenti che potrebbero apparire durante il passo precedente e
poi eseguire <userinput>shutdown -r now</userinput>.

</para><para>

<!-- For more information on <classname>kernel-package</classname>,
read the fine documentation in
<filename>/usr/share/doc/kernel-package</filename>. -->

Per ulteriori informazioni su <classname>kernel-package</classname>
si consulti l'eccellente documentazione in
<filename>/usr/share/doc/kernel-package</filename>.

</para>
  </sect2>
 </sect1>
