<!-- Start of file appendix/random-bits.xml -->
<!-- $Id: random-bits.xml 22661 2004-10-06 15:34:52Z fjpop-guest $ -->

<appendix id="random-bits"
><title
>Случайные биты</title>


<!-- Start of file appendix/example-preseed.xml -->
<!-- $Id: example-preseed.xml 23389 2004-10-23 08:00:57Z joeyh $ -->

<sect1 id="example-preseed">
<title
>Пример файла автоматической установки</title>

<para
>Это полностью работающий пример файла автоматической установки. В <xref linkend="automatic-install"/> описано как его использовать. Вы можете убрать комментарии с нужных вам строк перед использованием этого файла. </para>

<informalexample
><screen
>#### Modifying syslinux.cfg.

# Edit the syslinux.cfg (or similar) file, and add parameters to the end
# of the append line(s) for the kernel.
#
# You'll at least want to add a parameter telling the installer where to
# get its preseed file from.
# If you're installing from USB media, use this, and put the preseed file
# in the toplevel directory of the USB stick.
#   preseed/file=/hd-media/preseed
# If you're netbooting, use this instead:
#   preseed/url=http://host/path/to/preseed
# If you're remastering a CD, you could use this:
#   preseed/file=/cdrom/preseed
# Be sure to copy this file to the location you specify.
# 
# While you're at it, you may want to throw a debconf/priority=critical in
# there, to avoid most questions even if the preseeding below misses some.
# And you might set the timeout to 1 in syslinux.cfg to avoid needing to hit
# enter to boot the installer.
#
# Language, country, and keyboard selection cannot be preseeded from a file,
# because the questions are asked before the preseed file can be loaded.
# Instead, to avoid these questions, pass some more parameters to the kernel:
#
#    languagechooser/language-name=English
#    countrychooser/shortlist=US
#    console-keymaps-at/keymap=us
#
# Note that the kernel accepts a maximum of 8 command line options and
# 8 environment options (including any options added by default for the
# installer). If these numbers are exceeded, 2.4 kernels will drop any
# excess options and 2.6 kernels will panic.
# Some of the default options, like 'vga=normal' and 'devfs=mount' may be
# safely removed for most installations, which may allow you to add more
# options for preseeding.

#### Shell commands.

# d-i preseeding is inherently not secure. Nothing in the installer checks
# for attempts at buffer overflows or other exploits of the values of a
# preseed file like this one. Only use preseed files from trusted
# locations! To drive that home, and because it's generally useful, here's
# a way to run any shell command you'd like inside the installer,
# automatically.

# This first command is run as early as possible, just after
# preseeding is read.
#d-i        preseed/early_command                string wget http://url/to/my.udeb -O /tmp/my.udeb ; udpkg -i /tmp/my.udeb
# This command is run just before the install finishes, but when there is
# still a usable /target directory.
#d-i        preseed/late_command                string for deb in /hd-media/*.deb; do cp $deb /target/tmp; chroot /target dpkg -i /tmp/$(basename $deb); done
# This command is run just as base-config is starting up.
#base-config        base-config/early_command        string echo hi mom
# This command is run after base-config is done, just before the login:
# prompt. This is a good way to install a set of packages you want, or to
# tweak the configuration of the system.
#base-config        base-config/late_command        string apt-get install zsh; chsh -s /bin/zsh

#### Network configuration.

# Of course, this won't work if you're loading your preseed file from the
# network! But it's great if you're booting from CD or USB stick. You can
# also pass network config parameters in on the kernel params if you are
# loading preseed files from the network.

# netcfg will choose an interface that has link if possible. This makes it
# skip displaying a list if there is more than one interface.
d-i        netcfg/choose_interface select auto

# If you prefer to configure the network manually, here's how:
#d-i        netcfg/disable_dhcp        boolean true
#d-i        netcfg/get_nameservers        string 192.168.1.1
#d-i        netcfg/get_ipaddress        string 192.168.1.42
#d-i        netcfg/get_netmask        string 255.255.255.0
#d-i        netcfg/get_gateway        string 192.168.1.1
#d-i        netcfg/confirm_static        boolean true

# Note that any hostname and domain names assigned from dhcp take
# precidence over values set here. However, setting the values still
# prevents the questions from being shown even if values come from dhcp.
d-i        netcfg/get_hostname        string unassigned-hostname
d-i        netcfg/get_domain        string unassigned-domain

# Disable that annoying WEP key dialog.
d-i        netcfg/wireless_wep        string 
# The wacky dhcp hostname that some ISPs use as a password of sorts.
#d-i        netcfg/dhcp_hostname        string radish

#### Mirror settings.

d-i        mirror/country                string enter information manually
d-i        mirror/http/hostname        string http.us.debian.org
d-i        mirror/http/directory        string /debian
d-i        mirror/suite                string testing
d-i        mirror/http/proxy        string 

### Partitioning.

# If the system has free space you can choose to only partition that space.
#d-i        partman-auto/init_automatically_partition        select Use the largest continuous free space
# Alternatively, you can specify a disk to partition. The device name can
# be given in either devfs or traditional non-devfs format.
# For example, to use the first disk devfs knows of:
d-i        partman-auto/disk        string /dev/discs/disc0/disc

# You can choose from any of the predefined partitioning recipes:
d-i        partman-auto/choose_recipe        select All files in one partition (recommended for new users)
#d-i        partman-auto/choose_recipe        select Desktop machine
#d-i        partman-auto/choose_recipe        select Multi-user workstation
# Or provide a recipe of your own...
# The recipe format is documented in the file devel/partman-auto-recipe.txt.
# If you have a way to get a recipe file into the d-i environment, you can
# just point at it.
#d-i        partman-auto/expert_recipe_file        string /hd-media/recipe
# If not, you can put an entire recipe in one line. This example creates
# a small /boot partition, suitable swap, and uses the rest of the space
# for the root partition:
#d-i        partman-auto/expert_recipe        string boot-root :: 20 50 100 ext3 $primary{ } $bootable{ } method{ format } format{ } use_filesystem{ } filesystem{ ext3 } mountpoint{ /boot } .  500 10000 1000000000 ext3 method{ format } format{ } use_filesystem{ } filesystem{ ext3 } mountpoint{ / } .  64 512 300% linux-swap method{ swap } format{ } . 
# For reference, here is that same recipe in a more readable form:
#         boot-root ::
#         40 50 100 ext3
#                $primary{ } $bootable{ }
#                method{ format } format{ }
#                use_filesystem{ } filesystem{ ext3 }
#                mountpoint{ /boot }
#        .
#         500 10000 1000000000 ext3
#                method{ format } format{ }
#                use_filesystem{ } filesystem{ ext3 }
#                mountpoint{ / }
#        .
#         64 512 300% linux-swap
#                method{ swap } format{ }
#        .

# This makes partman automatically partition without confirmation.
d-i        partman/choose_partition        select Finish partitioning and write changes to disk
d-i        partman/confirm                        boolean        true

#### Boot loader installation.

# Grub is the default boot loader (for x86). If you want lilo installed
# instead, uncomment this:
#d-i        grub-installer/skip                boolean true

# This is fairly safe to set, it makes grub install automatically to the MBR
# if no other operating system is detected on the machine.
d-i        grub-installer/only_debian        boolean true
# This one makes grub-installer install to the MBR if if finds some other OS
# too, which is less safe as it might not be able to boot that other OS.
d-i        grub-installer/with_other_os        boolean true
# Alternatively, if you want to install to a location other than the mbr,
# uncomment and edit these lines:
#d-i        grub-installer/bootdev                string (hd0,0)
#d-i        grub-installer/only-debian        boolean false
#d-i        grub-installer/with_other_os        boolean false

##### Finishing up the first stage install.

# Avoid that last message about the install being complete.
d-i        prebaseconfig/reboot_in_progress        note 


##### Preseeding base-config.
# XXX: Note that most of this will not work right until base-config 2.40.4
# is available.

# Avoid the introductory message.
base-config        base-config/intro        note 

# Avoid the final message.
base-config        base-config/login        note 

# If you installed a display manager, but don't want to start it immediately
# after base-config finishes.
#base-config        base-config/start-display-manager        boolean false

###### Time zone setup.

# Controls whether or not the hardware clock is set to GMT.
base-config        tzconfig/gmt                boolean true

# If you told the installer that you're in the United States, then you
# can set the time zone using this variable.
# (Choices are: Eastern, Central, Mountain, Pacific, Alaska, Hawaii,
# Aleutian, Arizona East-Indiana, Indiana-Starke, Michigan, Samoa, other)
base-config        tzconfig/choose_country_zone/US        select Eastern
# If you told it you're in Canada.
# (Choices are: Newfoundland, Atlantic, Eastern, Central,
# East-Saskatchewan, Saskatchewan, Mountain, Pacific, Yukon, other)
base-config        tzconfig/choose_country_zone/CA        select Eastern
# If you told it you're in Brazil. (Choices are: East, West, Acre,
# DeNoronha, other)
base-config        tzconfig/choose_country_zone/BR        select East
# Many countries have only one time zone. If you told the installer you're
# in one of those countries, you can choose its standard time zone via this
# question.
base-config        tzconfig/choose_country_zone_single boolean true
# This question is asked as a fallback for countries other than those
# listed above, which have more than one time zone. You can preseed one of
# the time zones, or "other".
#base-config        tzconfig/choose_country_zone_multiple select 

###### Account setup.

# To preseed the root password, you have to put it in the clear in this
# file. That is not a very good idea, use caution!
#passwd                passwd/root-password                password r00tme
#passwd                passwd/root-password-again        password r00tme

# If you want to skip creation of a normal user account.
#passwd                passwd/make-user                boolean false
# Alternatively, you can preseed the user's name and login.
#passwd                passwd/user-fullname                string Debian User
#passwd                passwd/username                        string debian
# And their password, but use caution!
#passwd                passwd/user-password                password insecure
#passwd                passwd/user-password-again        password insecure

###### Apt setup.

# This question controls what source the second stage installation uses
# for packages. Choices are cdrom, http, ftp, filesystem, edit sources list
# by hand
base-config        apt-setup/uri_type        select http

# If you choose ftp or http, you'll be asked for a country and a mirror.
base-config        apt-setup/country        select enter information manually
base-config        apt-setup/hostname        string http.us.debian.org
base-config        apt-setup/directory        string /debian
# Stop after choosing one mirror.
base-config        apt-setup/another        boolean false

# You can choose to install non-free and contrib software.
#base-config        apt-setup/non-free        boolean true
#base-config        apt-setup/contrib        boolean true

# Do enable security updates.
base-config        apt-setup/security-updates        boolean true

###### Package selection.

# You can choose to install any combination of tasks that are available.
# Available tasks as of this writing include: Desktop environment,
# Web server, Print server, DNS server, File server, Mail server, 
# SQL database, manual package selection. The last of those will run
# aptitude. You can also choose to install no tasks, and force the
# installation of a set of packages in some other way.
# XXX: this will not work until tasksel 2.12 is available
tasksel                tasksel/first        multiselect Desktop environment
#tasksel        tasksel/first        multiselect Web server, Mail server, DNS server

###### Mailer configuration.

# During a normal install, exim asks only two questions. Here's how to
# avoid even those. More complicated preseeding is possible.
exim4-config        exim4/dc_eximconfig_configtype        select no configuration at this time
# It's a good idea to set this to whatever user account you choose to
# create. Leaving the value blank results in postmaster mail going to
# /var/mail/mail.
exim4-config        exim4/dc_postmaster                string 

###### X Configuration.

# Preseeding Debian's X config is possible, but you probably need to know
# some details about the video hardware of the machine, since Debian's X
# configurator does not do fully automatic configuration of everything.

# X can detect the right driver for some cards, but if you're preseeding,
# you override whatever it chooses. Still, vesa will work most places.
#xserver-xfree86        xserver-xfree86/config/device/driver        select vesa

# A caveat with mouse autodetection is that if it fails, X will retry it
# over and over. So if it's preseeded to be done, there is a possibility of
# an infinite loop if the mouse is not autodetected.
#xserver-xfree86        xserver-xfree86/autodetect_mouse        boolean true

# Monitor autodetection is recommended.
xserver-xfree86                xserver-xfree86/autodetect_monitor        boolean true
# Uncomment if you have a LCD display.
#xserver-xfree86        xserver-xfree86/config/monitor/lcd        boolean true
# X has three configuration paths for the monitor. Here's how to preseed
# the "medium" path, which is always available. The "simple" path may not
# be available, and the "advanced" path asks too many questions.
xserver-xfree86        xserver-xfree86/config/monitor/selection-method        select medium
xserver-xfree86        xserver-xfree86/config/monitor/mode-list        select 1024x768 @ 60 Hz

###### Everything else.

# Depending on what software you choose to install, or if things go wrong
# during the installation process, it's possible that other questions may
# be asked. You can preseed those too, of course. To get a list of every
# possible question that could be asked during an install, do an
# installation, and then run these commands:
#   debconf-get-selections --installer 
> file
#   debconf-get-selections 
>
> file

# If you like, you can include other preseed files into this one.
# Any settings in those files will override pre-existing settings from this
# file. More that one file can be listed, separated by spaces; all will be
# loaded. The included files can have preseed/include directives of their
# own as well. Note that if the filenames are relative, they are taken from
# the same directory as the preseed file that includes them.
#d-i        preseed/include        string x.cfg
# More flexably, this runs a shell command and if it outputs the names of
# preseed files, includes those files. For example, to switch configs based
# on a particular usb storage device (in this case, a built-in card reader):
#d-i        preseed/include_command        string if $(grep -q "GUID: 0aec3050aec305000001a003"  /proc/scsi/usb-storage-*/*); then echo kraken.cfg; else echo otherusb.cfg; fi
</screen
></informalexample>

</sect1>
<!--   End of file appendix/example-preseed.xml -->

<!-- Start of file appendix/files.xml -->
<!-- $Id: files.xml 23058 2004-10-12 23:51:17Z cjwatson $ -->


 <sect1 id="linuxdevices"
><title
>Устройства Linux</title>
<para
>В Linux есть различные специальные файлы в <filename
>/dev</filename
>. Эти файлы называются файлами устройств. В мире Unix доступ к аппаратуре различается. Здесь у вас есть специальный файл, который в действительности обслуживается драйвером, осуществляющим доступ к аппаратуре. Файл устройства это интерфейс к настоящим системным компонентам. Файлы в <filename
>/dev</filename
> также отличаются от обычных файлов. Ниже перечислены самые важные файлы устройств. </para
><para>

<informaltable
><tgroup cols="2"
><tbody>
<row>
  <entry
><filename
>fd0</filename
></entry>
  <entry
>Первый дисковод</entry>
</row
><row>
  <entry
><filename
>fd1</filename
></entry>
  <entry
>Второй дисковод</entry>
</row>
</tbody
></tgroup
></informaltable>

<informaltable
><tgroup cols="2"
><tbody>
<row>
  <entry
><filename
>hda</filename
></entry>
  <entry
>Жесткий диск IDE / CD-ROM на первом порту IDE (Master)</entry>
</row
><row>
  <entry
><filename
>hdb</filename
></entry>
  <entry
>Жесткий диск IDE / CD-ROM на первом порту IDE (Slave)</entry>
</row
><row>
  <entry
><filename
>hdc</filename
></entry>
  <entry
>Жесткий диск IDE / CD-ROM на втором порту IDE (Master)</entry>
</row
><row>
  <entry
><filename
>hdd</filename
></entry>
  <entry
>Жесткий диск IDE / CD-ROM на втором порту IDE (Slave)</entry>
</row
><row>
  <entry
><filename
>hda1</filename
></entry>
  <entry
>Первый раздел на первом жестком диске IDE</entry>
</row
><row>
  <entry
><filename
>hdd15</filename
></entry>
  <entry
>Пятнадцатый раздел на четвертом жестком диске IDE</entry>
</row>
</tbody
></tgroup
></informaltable>

<informaltable
><tgroup cols="2"
><tbody>
<row>
  <entry
><filename
>sda</filename
></entry>
  <entry
>Жесткий диск SCSI с наименьшим SCSI ID (т.е. 0)</entry>
</row
><row>
  <entry
><filename
>sdb</filename
></entry>
  <entry
>Жесткий диск SCSI со следующим наибольшим SCSI ID (т.е. 1)</entry>
</row
><row>
  <entry
><filename
>sdc</filename
></entry>
  <entry
>Жесткий диск SCSI со следующим наибольшим SCSI ID (т.е. 2)</entry>
</row
><row>
  <entry
><filename
>sda1</filename
></entry>
  <entry
>Первый раздел на первом жестком диске SCSI</entry>
</row
><row>
  <entry
><filename
>sdd10</filename
></entry>
  <entry
>Десятый раздел на четвертом жестком диске SCSI</entry>
</row>
</tbody
></tgroup
></informaltable>

<informaltable
><tgroup cols="2"
><tbody>
<row>
  <entry
><filename
>sr0</filename
></entry>
  <entry
>SCSI CD-ROM с наименьшим SCSI ID</entry>
</row
><row>
  <entry
><filename
>sr1</filename
></entry>
  <entry
>SCSI CD-ROM со следующим наибольшим SCSI ID</entry>
</row>
</tbody
></tgroup
></informaltable>

<informaltable
><tgroup cols="2"
><tbody>
<row>
  <entry
><filename
>ttyS0</filename
></entry>
  <entry
>Последовательный порт 0, COM1 под MS-DOS</entry>
</row
><row>
  <entry
><filename
>ttyS1</filename
></entry>
  <entry
>Последовательный порт 1, COM2 под MS-DOS</entry>
</row
><row>
  <entry
><filename
>psaux</filename
></entry>
  <entry
>Устройство PS/2 мышки</entry>
</row
><row>
  <entry
><filename
>gpmdata</filename
></entry>
  <entry
>Псевдо-устройство, повторитель данных от демона GPM (мышки)</entry>
</row>
</tbody
></tgroup
></informaltable>

<informaltable
><tgroup cols="2"
><tbody>
<row>
  <entry
><filename
>cdrom</filename
></entry>
  <entry
>Символическая ссылка на привод CD-ROM</entry>
</row
><row>
  <entry
><filename
>mouse</filename
></entry>
  <entry
>Символическая ссылка на файл устройства мышки</entry>
</row>
</tbody
></tgroup
></informaltable>

<informaltable
><tgroup cols="2"
><tbody>
<row>
  <entry
><filename
>null</filename
></entry>
  <entry
>Все, что направлено в этот интерфейс, исчезнет</entry>
</row
><row>
  <entry
><filename
>zero</filename
></entry>
  <entry
>Можно бесконечно читать нули из этого устройства</entry>
</row>
</tbody
></tgroup
></informaltable>

</para>

  <sect2>
<title
>Установка мышки</title>

<para
>Мышку можно использовать и в консоли Linux (с gpm), и в окружении X window. Два этих режима можно слдать совместимыми если повторитель gpm использован для разрешения прохождения сигнала в X server, как это показано ниже: <informalexample
><screen
>мышка =&#62; /dev/psaux  =&#62; gpm =&#62; /dev/gpmdata -&#62; /dev/mouse =&#62; X
         /dev/ttyS0             (повторитель)        (символьная ссылка)
         /dev/ttyS1
</screen
></informalexample>

</para
><para
>Установите протокол повторителя raw (в <filename
>/etc/gpm.conf</filename
>) и настройте X на оригинальный протокол мышки в <filename
>/etc/X11/XF86Config</filename
> или <filename
>/etc/X11/XF86Config-4</filename
>. </para
><para
>Такой подход с использованием gpm даже в X имеет преимущество, когда мышку отключают по неостророжности. Простой перезапуск gpm командой<informalexample
><screen>
user@debian:# /etc/init.d/gpm restart
</screen
></informalexample
> подключит мышку в программе заново без перезапуска X. </para
><para
>Если gpm запрещен или не установлен по некоторым причинам, убедитесь что настроили X на чтение прямо из устройства мышки, например /dev/psaux. Для подробностей посмотрите 3-Button Mouse mini-Howto в <filename
>/usr/share/doc/HOWTO/en-txt/mini/3-Button-Mouse.gz</filename
>, <userinput
>man gpm</userinput
>, <filename
>/usr/share/doc/gpm/FAQ.gz</filename
> и <ulink url="&url-xfree86;current/mouse.html"
>README.mouse</ulink
>. </para
><para arch="powerpc"
>Для PowerPC в <filename
>/etc/X11/XF86Config</filename
> или <filename
>/etc/X11/XF86Config-4</filename
> установите устройство мышки в <userinput
>"/dev/input/mice"</userinput
>. </para
><para arch="powerpc"
>Современные ядра дают вам возможность эмулировать трехкнопочную мышку, когда у вашей мышки только одна кнопка. Просто добавьте следубщие строки в файл <filename
>/etc/sysctl.conf</filename
>. <informalexample
><screen
># эмуляция 3-кнопочной мышки 
# включить эмуляцию
/dev/mac_hid/mouse_button_emulation = 1
# Посылать сингал средней кнопки мышки клавишей F11
/dev/mac_hid/mouse_button2_keycode = 87
# Посылать сингал правой кнопки мышки клавишей F12
/dev/mac_hid/mouse_button3_keycode = 88
# Для других клавиш, используйте showkey, который скажет вам нужный код.

</screen
></informalexample
>  
</para>
  </sect2>
 </sect1>

 <sect1 id="tasksel-size-list">
 <title
>Дисковое пространство, необходимое для задач</title>
<para
>Для базовой установки на i386, включая все стандартные пакеты, требуется 178МБ дискового пространства. </para
><para
>В следующей таблице содержатся размеры, полученные из aptitude для задач, описанных в tasksel. Заметим, что некоторые пакеты содержатся в нескольких задачах одновременно, поэтому полный размер установки для двух задач вместе может быть меньше, чем полный размер, полученный сложением размеров. </para
><para>

<informalexample
><screen
>Задача                              После установки  Нужно загрузить   Требует места 
                                  Размер (МБ)  Размер (МБ)  Для установки (МБ)

Десктоп                            1537        521        2058
Веб сервер                           71         21          92
Сервер печати                        240         83         323
Почтовый сервер                          41         12          53
Файловый сервер                          85         34         119
База данных SQL                        108         33         141

</screen
></informalexample>
</para>
 </sect1>
<!--   End of file appendix/files.xml -->

<!-- Start of file appendix/chroot-install.xml -->
<!-- $Id: chroot-install.xml 23059 2004-10-12 23:52:13Z cjwatson $ -->

 <sect1 id="linux-upgrade">
 <title
>Установка &debian; из системы Unix/Linux</title>

<para
>В этом разделе объясняется, как установить &debian; из существующей системы Unix или Linux, без использования управляемой через меню программы установки, основанной на ncurses, как это описывается в остальной части руководства. Это "cross-install" HOWTO запросили пользователи, переходящие на &debian; из Redhat, Mandrake и SUSE. В этом разделе подразумевается наличие некоторого опыта в командах *nix и в навигации по файловой системе. Здесь <prompt
>$</prompt
> означает команду, вводимую в текущей пользовательской системе, в то время как <prompt
>#</prompt
> относится к команде, вводимой в Debian chroot. </para
><para
>Как только вы получили новую систему Debian, настроенную по вашим указаниям, вы можете перенести ваши существующие данные (если они есть) в нее и продолжать полет. Это "нулевое время простоя" ("zero downtime") установки &debian;. Также это мудрый способ работы с аппаратурой, которая по-другому не желает нормально работать с разными загрузочными или установочными носителями. </para>

  <sect2>
  <title
>Начинаем</title>
<para
>С помощью вашей текущей утилиты разметки диска, переразбейте диск так, как это необходимо, создав как минимум одну файловую систему плюс область подкачки (swap). Вам нужно минимум 150 Мб доступного места для консольной установки или минимум 300 Мб, если вы планируете установить X. </para
><para
>Создайте файловую систему на ваших разделах. Например, чтобы создать файловую систему ext3 на разделе <filename
>/dev/hda6</filename
> (это корневой раздел в нашем примере): <informalexample
><screen>

 $ mke2fs -j /dev/hda6

</screen
></informalexample
> Чтобы создать файловую систему ext2, пропустите параметр <userinput
>-j</userinput
>. </para
><para
>Проинициализируйте и активизируйте раздел подкачки (подставьте номер раздела, предназначенного для раздела подкачки Debian): <informalexample
><screen
>$ mkswap /dev/hda5
 $ sync; sync; sync
 $ swapon /dev/hda5

</screen
></informalexample>

</para
><para
>Смонтируйте один раздел как <filename
>/mnt/debinst</filename
> (точка установки, она будет корневой (<filename
>/</filename
>) файловой системой в вашей новой системе). Имя точки монтирования абсолютно произвольное, оно описано позже. <informalexample
><screen
>$ mkdir /mnt/debinst
 $ mount /dev/hda6 /mnt/debinst

</screen
></informalexample>

</para>
  </sect2>

  <sect2>
  <title
>Установите <command
>debootstrap</command
></title>
<para
>Инструмент, которым пользуется программа установки Debian и который признан официальным способом установки базовой системы Debian -- <command
>debootstrap</command
>. Он использует <command
>wget</command
>, но зависит только от <classname
>/bin/sh</classname
>. Установите <command
>wget</command
>, если его еще нет в вашей текущей системе, а затем скачайте и установите <command
>debootstrap</command
>. </para
><para
>Если у вас система, основанная на rpm, вы можете использовать alien для конвертации .deb в .rpm, или скачать rpm-изированную версию с <ulink url="http://people.debian.org/~blade/install/debootstrap"
></ulink
> </para
><para
>Либо вы можете использовать следующую процедуру для установки его вручную. Создайте рабочую папку work для распаковки в нее .deb: <informalexample
><screen
>$ mkdir work
 $ cd work

</screen
></informalexample>
</para
><para
>Бинарник <command
>debootstrap</command
> расположен в архиве Debian (убедитесь, что вы выбрали правильный файл, соответствующий вашей архитектуре). Скачайте <command
>debootstrap</command
> .deb из <ulink url="http://ftp.debian.org/debian/pool/main/d/debootstrap/"
> пула</ulink
>, скопируйте пакет в рабочую папку work и извлеките бинарные файлы из него. Вам потребуются привилегии суперпользователя (root) для установки бинарников. <informalexample
><screen
>$ ar -xf debootstrap_0.X.X_arch.deb
 $ cd /
 $ zcat &#60; /full-path-to-work/work/data.tar.gz | tar xv

</screen
></informalexample>

</para>
  </sect2>

  <sect2>
  <title
>Запустите <command
>debootstrap</command
></title>
<para
>Когда вы его запустите, <command
>debootstrap</command
> может скачать необходимые файлы прямо из архива. Вы можете заменить в следующем примере <userinput
>http.us.debian.org/debian</userinput
> на любое зеркало архивов Debian, лучше всего на зеркало, наиболее близкое к вам с сетевой точки зрения. Список зеркал есть на <ulink url="http://www.debian.org/misc/README.mirrors"
></ulink
>. </para
><para
>Если у вас есть компакт-диск с &releasename; &debian;, смонтированный в <filename
>/cdrom</filename
>, вы можете подставить URL типа file вместо http URL: <userinput
>file:/cdrom/debian/</userinput
> </para
><para
>Замените <replaceable
>ARCH</replaceable
> на один из нижеследующих вариантов в строке вызова <command
>debootstrap</command
>: <userinput
>alpha</userinput
>, <userinput
>arm</userinput
>, <userinput
>hppa</userinput
>, <userinput
>i386</userinput
>, <userinput
>ia64</userinput
>, <userinput
>m68k</userinput
>, <userinput
>mips</userinput
>, <userinput
>mipsel</userinput
>, <userinput
>powerpc</userinput
>, <userinput
>s390</userinput
>, or <userinput
>sparc</userinput
>. <informalexample
><screen
>$ /usr/sbin/debootstrap --arch ARCH &releasename; \
     /mnt/debinst http://http.us.debian.org/debian

</screen
></informalexample>

</para>

  </sect2>

  <sect2>
  <title
>Настройка базовой системы</title>

<para
>Теперь у вас на диске есть настоящая, пусть и слабенькая, система Debian. Выполните <command
>Chroot</command
> в нее: <informalexample
><screen
>$ chroot /mnt/debinst /bin/bash

</screen
></informalexample>
</para>

   <sect3>
   <title
>Монтирование разделов</title>
<para
>Вам надо создать <filename
>/etc/fstab</filename
>. <informalexample
><screen
># editor /etc/fstab

</screen
></informalexample>

</para
><para
>Вот пример, который вы можете подогнать под себя: <informalexample
><screen
># /etc/fstab: информация о статических файловых системах.
#
# файл. система  точка монтир. тип     параметры                дамп проход
/dev/XXX         /             ext2    defaults                 0    0
/dev/XXX         /boot         ext2    ro,nosuid,nodev          0    2

/dev/XXX         none          swap    sw                       0    0
proc             /proc         proc    defaults                 0    0

/dev/fd0         /mnt/floppy   auto    noauto,rw,sync,user,exec 0    0
/dev/cdrom       /mnt/cdrom    iso9660 noauto,ro,user,exec      0    0

/dev/XXX         /tmp          ext2    rw,nosuid,nodev          0    2
/dev/XXX         /var          ext2    rw,nosuid,nodev          0    2
/dev/XXX         /usr          ext2    rw,nodev                 0    2
/dev/XXX         /home         ext2    rw,nosuid,nodev          0    2

</screen
></informalexample>

</para
><para
>Используйте <userinput
>mount -a</userinput
> для монтирования всех файловых систем, которые вы описали в вашем <filename
>/etc/fstab</filename
>, или смонтируйте файловые системы по раздельности: <informalexample
><screen
># mount /путь  # например:  mount /usr

</screen
></informalexample>

</para
><para
>Вы можете смотрировать файловую системы proc много раз и в разные места, хотя общепринято в /proc . Если вы не использовали <userinput
>mount -a</userinput
>, убедитесь, что смонтировали proc перед продолжением: <informalexample
><screen
># mount -t proc proc /proc

</screen
></informalexample>

</para>

   </sect3>

   <sect3>
   <title
>Настройка клавиатуры</title>

<para
>Для настройки вашей клавиатуры введите: <informalexample
><screen
># dpkg-reconfigure console-data

</screen
></informalexample>

</para>
   </sect3>

   <sect3>
   <title
>Настройка сети</title>
<para
>Для настройки сети отредактируйте <filename
>/etc/network/interfaces</filename
>, <filename
>/etc/resolv.conf</filename
> и <filename
>/etc/hostname</filename
>. <informalexample
><screen
># editor /etc/network/interfaces 

</screen
></informalexample>

</para
><para
>Вот несколько примеров из <filename
>/usr/share/doc/ifupdown/examples</filename
>: <informalexample
><screen
>######################################################################
# /etc/network/interfaces -- configuration file for ifup(8), ifdown(8)
# See the interfaces(5) manpage for information on what options are 
# available.
######################################################################

# We always want the loopback interface.
#
auto lo
iface lo inet loopback

# To use dhcp:
#
# auto eth0
# iface eth0 inet dhcp

# An example static IP setup: (broadcast and gateway are optional)
#
# auto eth0
# iface eth0 inet static
#     address 192.168.0.42
#     network 192.168.0.0
#     netmask 255.255.255.0
#     broadcast 192.168.0.255
#     gateway 192.168.0.1
</screen
></informalexample>

</para
><para
>Введите адрес(а) ваших DNS-серверов и настройки поиска в <filename
>/etc/resolv.conf</filename
>: <informalexample
><screen
># editor /etc/resolv.conf

</screen
></informalexample>

</para
><para
>Простой <filename
>/etc/resolv.conf</filename
>: <informalexample
><screen
># search hqdom.local\000
# nameserver 10.1.1.36
# nameserver 192.168.9.100

</screen
></informalexample>

</para
><para
>Введите хост-имя вашей системы (от 2 до 63 символов): <informalexample
><screen
># echo DebianHostName &#62; /etc/hostname

</screen
></informalexample>

</para
><para
>Если у вас есть несколько сетевых карт, вы должны упорядочить имена модулей драйверов в файле <filename
>/etc/modules</filename
> file в нужном порядке. Позже во время загрузки, каждая карта будет ассоциирована с именем интерфейса (eth0, eth1, и т.д.) как вы и ожидаете. </para>
   </sect3>

   <sect3>
   <title
>Настройка часового пояса, пользователей и APT</title>

<para
>Установите ваш часовой пояс, добавьте обычного пользователя и выберите ваши источники <command
>apt</command
>, запустив <informalexample
><screen
># /usr/sbin/base-config new

</screen
></informalexample>
</para>
   </sect3>

   <sect3>
   <title
>Настройка локалей</title>
<para
>Для настройки вашей локали, чтобы пользоваться другим языком, а не английским, установите пакет поддержки локалей и настройте его: <informalexample
><screen>

 # apt-get install locales
 # dpkg-reconfigure locales

</screen
></informalexample
> ЗАМЕЧАНИЕ: Apt должен быть сначала настроен, например, во время фазы base-config. Перед использованием локалей с набором символов, отличающимся от ASCII или latin1, пожалуйста проконсультируйтесь с нужным HOWTO по локализации. </para>
   </sect3>
  </sect2>

  <sect2>
  <title
>Установка ядра</title>

<para
>Если вы намерены загрузиться в эту систему, вам скорее всего понадобится ядро Linux и системный загрузчик. Определите доступные пакеты с ядрами при помощи <informalexample
><screen
># apt-cache search kernel-image

</screen
></informalexample>

</para
><para
>А затем установите ваш выбор, используя имя его пакетв. <informalexample
><screen
># apt-get install kernel-image-2.X.X-арх-и.т.д.

</screen
></informalexample>

</para>
  </sect2>

  <sect2>
<title
>Установка системного загрузчика</title>
<para
>Чтобы сделать вашу систему &debian; загружаемой, настройте ваш системный загрузчик на загрузку установленного ядра с вашим новым корневым разделом. Запомните, что debootstrap не устанавливает системный загрузчик, так что вы можете использовать apt-get внутри вашего Debian chroot, чтобы сделать это. </para
><para arch="i386"
>Просмотрите <userinput
>info grub</userinput
> или <userinput
>man lilo.conf</userinput
> для инструкций об установке системного загрузчика. Если вы оставляете систему, которую использовали для установки Debian, просто добавьте запись для установленной системы Debian в существующий файл grub <filename
>menu.lst</filename
>или <filename
>lilo.conf</filename
>. Также вы можете скопировать его в новую систему и отредактировать его там. После того как закончите редактирование, вызовите lilo (помните, что он будет использовать <filename
>lilo.conf</filename
>, относящийся к системе, из которой его вызвали). </para
><para arch="i386"
>Вот простой <filename
>/etc/lilo.conf</filename
> в качестве примера: <informalexample
><screen
>boot=/dev/hda6
root=/dev/hda6
install=/boot/boot-menu.b
delay=20
lba32
image=/vmlinuz
label=Debian

</screen
></informalexample>

</para
><para arch="powerpc"
>Просмотрите <userinput
>man yaboot.conf</userinput
> для инструкций об установке системного загрузчика. Если вы оставляете систему, которую использовали для установки Debian, просто добавьте запись для установленной системы Debian в существующий <filename
>yaboot.conf</filename
>. Также вы можете скопировать его в новую систему и отредактировать его там. После того, как закончите редактирование, вызовите ybin (помните, что он будет использовать <filename
>yaboot.conf</filename
>, относящийся к системе, из которой его вызвали). </para
><para arch="powerpc"
>Вот простой <filename
>/etc/yaboot.conf</filename
> в качестве примера: <informalexample
><screen>

boot=/dev/hda2
device=hd:
partition=6
root=/dev/hda6
magicboot=/usr/lib/yaboot/ofboot
timeout=50
image=/vmlinux
label=Debian

</screen
></informalexample
> На некоторых машинах вам возможно понадобится использовать <userinput
>ide0:</userinput
> вместо <userinput
>hd:</userinput
>. </para>
  </sect2>
 </sect1>
<!--   End of file appendix/chroot-install.xml -->

</appendix>
<!--   End of file appendix/random-bits.xml -->
