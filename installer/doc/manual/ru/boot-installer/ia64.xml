<!-- retain these comments for translator revision tracking -->
<!-- $Id: ia64.xml 22919 2004-10-09 08:59:45Z nahoo-guest $ -->

  <sect2 arch="ia64"><title>Запуск с компакт-диска</title>
&boot-installer-intro-cd.xml; <note>
  <title>Содержимое компакт-диска</title>

<para>Существует три основные вариации установочных компакт-дисков Debian. Диск-<emphasis>визитка</emphasis>  содержит минимальную установку, которая помещается на носителе маленького формата. Он требует сетевого соединения для установки остальной части базовой установки и создания пригодной для работы системы. Диск <emphasis>сетевой установки</emphasis> содержит все пакеты для базовой установки, но требует сетевого соединения с зеркалами Debian для установки дополнительных пакетов, если вам хочется получить полноценную систему. А весь комплект компакт-дисков Debian может установить полноценную систему с большим выбором пакетов безо всякого доступа к сети. </para>
  </note>

<para>Архитектура IA-64 использует интерфейс следующего поколения Extensible Firmware Interface (EFI) от Intel. В отличие от традиционного BIOS x86, который ничего не знает о загрузочном устройстве кроме таблицы разделов и главной загрузочной записи (MBR), EFI может читать и записывать файлы из разделов отформатированных в FAT16 или FAT32. Это упрощает зачастую просто чародейский процесс старта системы. Системный загрузчик и микропрограмма EFI, которая поддерживает его, получают целую файловую систему для хранения файлов, необходимых для загрузки машины. Это значит, что системный диск на системе IA-64 содержит дополнительный дисковый раздел, выделенный под EFI, вместо простой MBR или загрузочного сектора на обычных системах. </para><para>Компакт-диск Debian содержит небольшую версию раздела EFI, в котором находятся программа<command>ELILO</command>, ее файл конфигурации, ядро программы установки и начальная файловая система (initrd). Работающая система тоже содержит раздел EFI, в котором располагаются необходимые для загрузки системы файлы. Эти файлы доступны для чтения из командной оболочки EFI Shell, как описано ниже. </para><para>Большинство деталей того, как <command>ELILO</command> на самом деле загружает и запускает систему, прозрачны для программы установки. Однако, программа установки должна настроить раздел EFI перед установкой базовой системы. В противном случае, установка <command>ELILO</command> завершится неудачно, что сделает системы незагружаемой. Раздел EFI создаётся и форматируется на этапе разметки дисков процесса установки, перед загрузкой пакетов на системный диск. На этапе разметки дисков также проверяется существование пригодного к использованию раздела EFI перед тем, как разрешить установке продолжиться. </para><para>Системный загрузчик EFI запускается на последнем шаге инициализации микропрограммы. Он отображает список меню, из которого пользователь может выбрать вариант. В зависимости от модели системы и установленных программ, это меню может выглядеть по-разному. Должно быть отображено два пункта меню, <command>Boot Option Maintenance Menu</command> и <command>EFI Shell (Built-in)</command>. Использование первого предпочтительнее, однако , если он недоступен или компакт-диск по каким-то причинам не загрузился с ним, используйте второй. </para>

  <warning>
  <title>ВАЖНО</title>
<para>Системный загрузчик EFI выполнит команду загрузки по умолчанию, обычно из первого пункта меню, через заданное число секунд. На это указывает обратный отсчёт внизу экрана. Как только время закончится и запустится система по умолчанию, для продолжения установки вам придётся перезагрузить машину. Если командой по умолчанию является EFI Shell, то вы можете вернуться в системный загрузчик выполнив <command>exit</command> из командной строки. </para>
  </warning>

  <sect3 arch="ia64" id="bootable-cd">
  <title>Вариант 1: Загрузка из Boot Option Maintenance Menu</title>
 

<itemizedlist>

<listitem><para>Вставьте CD в DVD/CD привод и перезагрузите машину. После завершения инициализации системы firmware покажет страницу системного загрузчика EFI и меню. </para></listitem>

<listitem><para>Выберите <command>Boot Maintenance Menu</command> из меню с помощью клавиш управления курсором и нажмите <command>ENTER</command>. Вы попадёте в следующее меню. </para></listitem>

<listitem><para>Выберите <command>Boot From a File</command> из меню с помощью клавиш управления курсором и нажмите <command>ENTER</command>. Вы увидите список устройств, протестированных firmware. Вы должны увидеть две строки меню, содержащих или <command>Debian Inst [Acpi ...</command> или <command>Removable Media Boot</command>. Если вы посмотрите на остальную часть строки меню, то заметите, что информация об устройстве и контроллере будет динаковой. </para></listitem>

<listitem><para>Вы можете выбрать одну из записей, которые указывают на CD/DVD привод. Выделите одну с помощью клавиш управления курсором и нажмите <command>ENTER</command>. Если вы выберите <command>Removable Media Boot</command>, то машина немедленно запустит процедуру начальной загрузки. Если вы выберите <command>Debian Inst [Acpi ...</command>, то появится список частей CD, с которых можно загрузиться и потребуется выполнить следующий (дополнительный) шаг. </para></listitem>

<listitem><para>Этот шаг нужен только если вы выбрали <command>Debian Inst [Acpi ...</command>. Список также появится после строки <command>[Treat like Removable Media Boot]</command>. Выберите эту строку с помощью клавиш управления курсором и нажмите <command>ENTER</command>.Это запустит процедуру начальной загрузки. </para></listitem>

</itemizedlist>

<para>Эти шаги запустят начальный загрузчик Debian, которая выведет страницу меню для выбора загружаемого ядра и параметров. Чтобы продолжить, выберите ядро и параметры. </para>
  </sect3>

  <sect3 arch="ia64" id="boot-with-efi">
  <title>Вариант 2: Загрузка из EFI Shell</title>
<para>Если по каким-то причинам вариант 1 не сработал, перезагрузите машину и когдапоявится меню системного загрузчика EFI, то в нём должен быть ещё один пункт<command>EFI Shell [Built-in]</command>. Загрузите программу установки Debian с CD с помощью следующих шагов: </para>

<itemizedlist>

<listitem><para>Вставьте CD в DVD/CD привод и перезагрузите машину. После завершения инициализации системы firmware покажет страницу системного загрузчика EFI и меню. </para></listitem>

<listitem><para>Выберите <command>EFI Shell</command> из меню с помощью клавиш управления курсором и нажмите <command>ENTER</command>. EFI Shell просканирует все устойства, с которых можно загрузиться и покажет их в консоли, перед приглашением к вводу из командной строки. Распознанные загрузочные разделы устройств показываются как <filename>fs<emphasis>n</emphasis>:</filename>. Все остальные распрознанные разделы называются <filename>blk<emphasis>n</emphasis>:</filename>. Если вы вставили CD только еред входом в EFI shell, то может потребоваться несколько дополнительных екунд для инициализации CD привода. </para>
</listitem>

<listitem><para>Найдите в выводе EFI shell привод CDROM. По всей вероятности устройство называется <filename>fs0:</filename>, хотя другие устройства с загрузочными разделами тоже могут отображаться как <filename>fs<emphasis>n</emphasis></filename>. </para></listitem>

<listitem><para>Чтобы выбрать устройство, введите <command>fs<emphasis>n</emphasis>:</command> и наажмите <command>ENTER</command>, где <emphasis>n</emphasis> номер раздела дляCDROM. EFI shell теперь покажет этот номер в своём приглашении. </para></listitem>

<listitem><para>Введите <command>elilo</command> и нажмите <command>ENTER</command>. Это запустит процедуру начальной загрузки. </para></listitem>

</itemizedlist>

<para>Как и в варианте 1, эти шаги запускают начальный загрузчик Debian, который показывает страницу меню для выбора загружаемого ядра и параметров. Также вы можете ввести короткую команду <command>fs<emphasis>n</emphasis>:elilo</command> в командной строке.Чтобы продолжить, выберите ядро и параметры. </para>

  </sect3>

  <sect3 arch="ia64" id="kernel-option-menu">
  <title>Выбора загружаемого ядра и параметров</title>

<para>Начальный загрузчик выводит меню и текстовое окно с приглашением <classname>Boot:</classname>. Клавишами управления курсором выбирается строка меню, а в текстовое окно вводится всё набранное на клавиатуре. Есть также экраны с помощью, в которые можно попасть нажав соответствующую функциональную клавишу. На экране помощи <classname>General</classname> объясняются пункты меню, а экран<classname>Params</classname> рассказывает об общих параметрах командной строки. </para>

   <title>Консоль на последовательном порту</title>
<para>Вы можете выбрать выполнение установки с помощью монитора и клавиатуры или через последовательный порт. Чтобы использовать монитор/клавиатурную установку, выберите пункт содержащий строку [VGA console]. Для установки через последовательный порт, выберите пункт, содержащий строку [<replaceable>BAUD</replaceable> baud serial console], где <replaceable>BAUD</replaceable> это скорость вышего последовательного порта. Типичные настройки скорости устройства ttyS0 выделены в отдельные пункты меню. </para>
<para>В большинстве случаев вам нужно чтобы скорость программы установки была равной сс подключённой консолью EFI. Если вы не знаете какой она должна быть, то можете получить скорость с помощью команды <command>baud</command> в EFI shell. </para>
<para>Если в меню нет пунктов со скоростями для последовательного порта или нет скорости, которая вам требуется, то вы можете изменить настройки консоли одного из существующих пунков меню. Например, чтобы использовать на консоли 57600 бод черезустройство ttyS1, введите <command>console=ttyS1,57600n8</command> в текстовом окнес приглашением <classname>Boot:</classname>. </para>

<note><para>Большинство машин IA-64 продаётся настроенными по умолчанию консолями на 9600 бод. Эта настройка довольно медленнна, и займёт значительное время для прорисовки каждого экрана при обычном процессе установки. Вы должны подумать над увеличением скорости, используемой при установке или выполнять установку в текстовом режиме. Смотрите в меню помощи <classname>Params</classname> инструкции по запуску программы установки в текстовом режиме. </para></note>

<warning><para>Если вы выберите неверный тип консоли, то сможете выбрать ядро и задать параметры, но после запуска ядра через монитор и клавиатуру станет невозможно работать и потребуется перезапуск перед началом установки. </para></warning>

<para>Прочитав экран помощи <classname>General</classname>, выберите ядро и режим установки, которые наиболее вам подходят. Также вы должны прочитать в <xref linkend="boot-parms"/> про любой дополнительный параметр, которые вам может потребоваться ввести в приглашении <classname>Boot:</classname>. Выбираемая версия ядра будет использована для процесса установки и в установленной системе. Если вы испытываете проблемы с ядром во время установки, то скорее всего вы получите те же проблемы в установленной системе. В следующих двух шагах выбирается и запускается установка: </para>

<itemizedlist>

<listitem><para>С помощью клавиш управления курсором выберите версию ядра и режим установки, наиболее подходящий вам. </para></listitem>

<listitem><para>Введите любые параметры, набрав их с клавиатуры. Текст будет отображаться прямо в текстовом окне. Здесь же задаются параметры ядра ( такие как консоль на последовательном порту). </para></listitem>

<listitem><para>Нажмите <command>ENTER</command>. Загрузится и запустится ядро. Ядро выведет обычные сообщения инициализации, а затем появится первый экран программы установки Debian. </para></listitem> 

</itemizedlist>

  </sect3>

<para>Переходите к следующей главе, чтобы продолжить процесс установки, где вы настроите язык, сеть и дисковые разделы. </para>
  </sect2>

  <sect2 arch="ia64" id="boot-tftp"><title>Booting with TFTP</title>

<para>
Booting an IA64 system from the network is similar to a CD boot.
The only difference is how the installation kernel is loaded.
The EFI Boot Manager can load and start programs from a server on
the network.
Once the installation kernel is loaded and starts, the system install
will proceed thru the same steps as the CD install with the exception
that the packages of the base install will be loaded from the network
rather than the CD drive.

</para>

&boot-installer-intro-net.xml;

<para>

Network booting an ia64 system requires two architecture-specific actions.
On the boot server, DHCP and TFTP must be configured to deliver
<command>elilo</command>.
On the client a new boot option must be defined in the EFI boot manager
to enable loading over a network.

</para>

  <sect3 arch="ia64" id="boot-tftp-server">
  <title>Configuring the Server</title>
<para>

A suitable TFTP entry for network booting an ia64 system looks something
like this:

<informalexample><screen>

host mcmuffin {
        hardware ethernet 00:30:6e:1e:0e:83;
        fixed-address 10.0.0.21;
        filename "debian-installer/ia64/elilo.efi";
}

</screen></informalexample>

Note that the goal is to get <command>elilo.efi</command> running on
the client.

</para><para>

Extract the <filename>netboot.tar.gz</filename> file into the directory used
as the root for your tftp server.  Typical tftp root directories include
<filename>/var/lib/tftp</filename> and <filename>/tftpboot</filename>.
This will create a <filename>debian-installer</filename> directory
tree containing the boot files for an IA-64 system.

</para><para>

<informalexample><screen>
# cd /var/lib/tftp
# tar xvfz /home/user/netboot.tar.gz
./
./debian-installer/
./debian-installer/ia64/
[...]
</screen></informalexample>

The <filename>netboot.tar.gz</filename> contains an
<filename>elilo.conf</filename> file that should work for most configurations.
However, should you need to make changes to this file, you can find it in the
<filename>debian-installer/ia64/</filename> directory.

It is possible to have different config files for different clients by naming
them using the client's IP address in hex with the suffix
<filename>.conf</filename> instead of <filename>elilo.conf</filename>.
See documentation provided in the <classname>elilo</classname> package
for details.

</para>
  </sect3>

  <sect3 arch="ia64" id="boot-tftp-client">
  <title>Configuring the Client</title>
<para>

To configure the client to support TFTP booting, start by booting to
EFI and entering the <guimenu>Boot Option Maintenance Menu</guimenu>.

<itemizedlist>
<listitem><para>

Add a boot option.

</para></listitem>
<listitem><para>

You should see one or more lines with the text
<guimenuitem>Load File [Acpi()/.../Mac()]</guimenuitem>.  If more
than one of these entries exist, choose the one containing the
MAC address of the interface from which you'll be booting.
Use the arrow keys to highlight your choice, then press enter.

</para></listitem>
<listitem><para>

Name the entry <userinput>Netboot</userinput> or something similar,
save, and exit back to the boot options menu.  

</para></listitem>
</itemizedlist>

You should see the new boot option you just created, and selecting it
should initiate a DHCP query, leading to a TFTP load of
<filename>elilo.efi</filename> from the server.

</para><para>

The boot loader will display its prompt after it has downloaded and
processed its configuration file.
At this point, the installation proceeds with the same steps as a
CD install.  Select a boot option as in above and when the kernel
has completed installing itself from the network, it will start the
Debian Installer.

</para><para>

Proceed to the next chapter to continue the installation where
you will set up the language locale, network, and the disk partitions.

</para>
  </sect3>
  </sect2>
