<!-- retain these comments for translator revision tracking -->
<!-- $Id: ia64.xml 21882 2004-09-20 06:06:05Z dannf $ -->

  <sect2 arch="ia64"><title>Запуск с компакт-диска</title>
&boot-installer-intro-cd.xml; <note>
  <title>Содержимое компакт-диска</title>

<para>Существует три основные вариации установочных компакт-дисков Debian. Диск-<emphasis>визитка</emphasis>  содержит минимальную установку, которая помещается на носителе маленького формата. Он требует сетевого соединения для установки остальной части базовой установки и создания пригодной для работы системы. Диск <emphasis>сетевой установки</emphasis> содержит все пакеты для базовой установки, но требует сетевого соединения с зеркалами Debian для установки дополнительных пакетов, если вам хочется получить полноценную систему. А весь комплект компакт-дисков Debian может установить полноценную систему с большим выбором пакетов безо всякого доступа к сети. </para>
  </note>

<para>The IA-64 architecture uses the next generation Extensible Firmware Interface (EFI) from Intel. Unlike the traditional x86 BIOS which knows little about the boot device other than the partition table and Master Boot Record (MBR), EFI can read and write files from FAT16 or FAT32 formatted disk partitions. This simplifies the often arcane process of starting a system. The system boot loader and the EFI firmware that supports it have a full filesystem to store the files necessary for booting the machine. This means that the system disk on an IA-64 system has an additional disk partition dedicated to EFI instead of the simple MBR or boot block on more conventional systems. </para><para>The Debian Installer CD contains a small EFI partition where the <command>ELILO</command> bootloader, its configuration file, the installer's kernel, and initial filesystem (initrd) are located. The running system also contains an EFI partition where the necessary files for booting the system reside. These files are readable from the EFI Shell as described below. </para><para>Most of the details of how <command>ELILO</command> actually loads and starts a system are transparent to the system installer. However, the installer must set up an EFI partition prior to installing the base system. Otherwise, the installation of <command>ELILO</command> will fail, rendering the system un-bootable. The EFI partition is allocated and formatted in the partitioning step of the installation prior to loading any packages on the system disk. The partitioning task also verifies that a suitable EFI partition is present before allowing the installation to proceed. </para><para>The EFI Boot Manager is presented as the last step of the firmware initialization. It displays a menu list from which the user can select an option. Depending on the model of system and what other software has been loaded on the system, this menu may be different from one system to another. There should be at least two menu items displayed, <command>Boot Option Maintenance Menu</command> and <command>EFI Shell (Built-in)</command>. Using the first option is preferred, however, if that option is not available or the CD for some reason does not boot with it, use the second option. </para>

  <warning>
  <title>ВАЖНО</title>
<para>The EFI Boot Manager will select a default boot action, typically the first menu choice, within a pre-set number of seconds. This is indicated by a countdown at the bottom of the screen. Once the timer expires and the systems starts the default action, you may have to reboot the machine in order to continue the installation. If the default action is th EFI Shell, you can return to the Boot Manager by running <command>exit</command> at the shell prompt. </para>
  </warning>

  <sect3 arch="ia64" id="bootable-cd">
  <title>Вариант 1: Загрузка из Boot Option Maintenance Menu</title>
 

<itemizedlist>

<listitem><para>Вставьте CD в DVD/CD привод и перезагрузите машину. После завершения инициализации системы firmware покажет страницу системного загрузчика EFI и меню. </para></listitem>

<listitem><para>Выберите <command>Boot Maintenance Menu</command> из меню с помощью клавиш управления курсором и нажмите <command>ENTER</command>. Вы попадёте в следующее меню. </para></listitem>

<listitem><para>Выберите <command>Boot From a File</command> из меню с помощью клавиш управления курсором и нажмите <command>ENTER</command>. Вы увидите список устройств, протестированных firmware. Вы должны увидеть две строки меню, содержащих или <command>Debian Inst [Acpi ...</command> или <command>Removable Media Boot</command>. Если вы посмотрите на остальную часть строки меню, то заметите, что информация об устройстве и контроллере будет динаковой. </para></listitem>

<listitem><para>Вы можете выбрать одну из записей, которые указывают на CD/DVD привод. Выделите одну с помощью клавиш управления курсором и нажмите <command>ENTER</command>. Если вы выберите <command>Removable Media Boot</command>, то машина немедленно запустит процедуру начальной загрузки. Если вы выберите <command>Debian Inst [Acpi ...</command>, то появится список частей CD, с которых можно загрузиться и потребуется выполнить следующий (дополнительный) шаг. </para></listitem>

<listitem><para>Этот шаг нужен только если вы выбрали <command>Debian Inst [Acpi ...</command>. Список также появится после строки <command>[Treat like Removable Media Boot]</command>. Выберите эту строку с помощью клавиш управления курсором и нажмите <command>ENTER</command>.Это запустит процедуру начальной загрузки. </para></listitem>

</itemizedlist>

<para>Эти шаги запустят начальный загрузчик Debian, которая выведет страницу меню для выбора загружаемого ядра и параметров. Чтобы продолжить, выберите ядро и параметры. </para>
  </sect3>

  <sect3 arch="ia64" id="boot-with-efi">
  <title>Вариант 2: Загрузка из EFI Shell</title>
<para>Если по каким-то причинам вариант 1 не сработал, перезагрузите машину и когдапоявится меню системного загрузчика EFI, то в нём должен быть ещё один пункт<command>EFI Shell [Built-in]</command>. Загрузите программу установки Debian с CD с помощью следующих шагов: </para>

<itemizedlist>

<listitem><para>Вставьте CD в DVD/CD привод и перезагрузите машину. После завершения инициализации системы firmware покажет страницу системного загрузчика EFI и меню. </para></listitem>

<listitem><para>Выберите <command>EFI Shell</command> из меню с помощью клавиш управления курсором и нажмите <command>ENTER</command>. EFI Shell просканирует все устойства, с которых можно загрузиться и покажет их в консоли, перед приглашением к вводу из командной строки. Распознанные загрузочные разделы устройств показываются как <filename>fs<emphasis>n</emphasis>:</filename>. Все остальные распрознанные разделы называются <filename>blk<emphasis>n</emphasis>:</filename>. Если вы вставили CD только еред входом в EFI shell, то может потребоваться несколько дополнительных екунд для инициализации CD привода. </para>
</listitem>

<listitem><para>Найдите в выводе EFI shell привод CDROM. По всей вероятности устройство называется <filename>fs0:</filename>, хотя другие устройства с загрузочными разделами тоже могут отображаться как <filename>fs<emphasis>n</emphasis></filename>. </para></listitem>

<listitem><para>Чтобы выбрать устройство, введите <command>fs<emphasis>n</emphasis>:</command> и наажмите <command>ENTER</command>, где <emphasis>n</emphasis> номер раздела дляCDROM. EFI shell теперь покажет этот номер в своём приглашении. </para></listitem>

<listitem><para>Введите <command>elilo</command> и нажмите <command>ENTER</command>. Это запустит процедуру начальной загрузки. </para></listitem>

</itemizedlist>

<para>Как и в варианте 1, эти шаги запускают начальный загрузчик Debian, который показывает страницу меню для выбора загружаемого ядра и параметров. Также вы можете ввести короткую команду <command>fs<emphasis>n</emphasis>:elilo</command> в командной строке.Чтобы продолжить, выберите ядро и параметры. </para>

  </sect3>

  <sect3 arch="ia64" id="kernel-option-menu">
  <title>Выбора загружаемого ядра и параметров</title>

<para>Начальный загрузчик выводит меню и текстовое окно с приглашением <classname>Boot:</classname>. Клавишами управления курсором выбирается строка меню, а в текстовое окно вводится всё набранное на клавиатуре. Есть также экраны с помощью, в которые можно попасть нажав соответствующую функциональную клавишу. На экране помощи <classname>General</classname> объясняются пункты меню, а экран<classname>Params</classname> рассказывает об общих параметрах командной строки. </para>

   <title>Консоль на последовательном порту</title>
<para>You may choose to perform an install using a monitor and keyboard or using a serial connection. To use a monitor/keyboard setup, select an option containing the string [VGA console]. To install over a serial connection, choose an option containing the string [<replaceable>BAUD</replaceable> baud serial console], where <replaceable>BAUD</replaceable> is the speed of your serial console. Menu items for the most typical baud rate settings on the ttyS0 device are preconfigured. </para>
<para>In most circumstances, you will want the installer to use the same baud rate as your connection to the EFI console. If you aren't sure what this setting is, you can obtain it using the command <command>baud</command> at the EFI shell. </para>
<para>If there is not an option available that is configured for the serial device or baud rate you would like to use, you may override the console setting for one of the existing menu options. For example, to use a 57600 baud console over the ttyS1 device, enter <command>console=ttyS1,57600n8</command> into the <classname>Boot:</classname> text window. </para>

<note><para>Most IA-64 boxes ship with a default console setting of 9600 baud. This setting is rather slow, and the normal installation process will take a significant time to draw each screen. You should consider either increasing the baud rate used for performing the installation, or performing a Text Mode installation. See the <classname>Params</classname> help menu for instructions on starting the installer in Text Mode. </para></note>

<warning><para>If you select the wrong console type, you will be able to select the kernel and enter parameters but both the display and your input will go dead as soon as the kernel starts, requiring you to reboot before you can begin the installation. </para></warning>

<para>Прочитав экран помощи <classname>General</classname>, выберите ядро и режим установки, которые наиболее вам подходят. Также вы должны прочитать в <xref linkend="boot-parms"/> про любой дополнительный параметр, которые вам может потребоваться ввести в приглашении <classname>Boot:</classname>. Выбираемая версия ядра будет использована для процесса установки и в установленной системе. Если вы испытываете проблемы с ядром во время установки, то скорее всего вы получите те же проблемы в установленной системе. В следующих двух шагах выбирается и запускается установка: </para>

<itemizedlist>

<listitem><para>С помощью клавиш управления курсором выберите версию ядра и режим установки, наиболее подходящий вам. </para></listitem>

<listitem><para>Enter any boot parameters by typing at the keyboard. The text will be displayed directly in the text window. This is where kernel parameters (such as serial console settings) are specified. </para></listitem>

<listitem><para>Нажмите <command>ENTER</command>. Загрузится и запустится ядро. Ядро выведет обычные сообщения инициализации, а затем появится первый экран программы установки Debian. </para></listitem> 

</itemizedlist>

  </sect3>

<para>Переходите к следующей главе, чтобы продолжить процесс установки, где вы настроите язык, сеть и дисковые разделы. </para>
  </sect2>

  <sect2 arch="ia64" id="boot-tftp"><title>Booting with TFTP</title>

<para>
Booting an IA64 system from the network is similar to a CD boot.
The only difference is how the installation kernel is loaded.
The EFI Boot Manager can load and start programs from a server on
the network.
Once the installation kernel is loaded and starts, the system install
will proceed thru the same steps as the CD install with the exception
that the packages of the base install will be loaded from the network
rather than the CD drive.

</para>

&boot-installer-intro-net.xml;

<para>

Network booting an ia64 system requires two architecture-specific actions.
On the boot server, DHCP and TFTP must be configured to deliver
<command>elilo</command>.
On the client a new boot option must be defined in the EFI boot manager
to enable loading over a network.

</para>

  <sect3 arch="ia64" id="boot-tftp-server">
  <title>Configuring the Server</title>
<para>

A suitable TFTP entry for network booting an ia64 system looks something
like this:

<informalexample><screen>

host mcmuffin {
        hardware ethernet 00:30:6e:1e:0e:83;
        fixed-address 10.0.0.21;
        filename "debian-installer/ia64/elilo.efi";
}

</screen></informalexample>

Note that the goal is to get <command>elilo.efi</command> running on
the client.

</para><para>

Extract the <filename>netboot.tar.gz</filename> file into the directory used
as the root for your tftp server.  Typical tftp root directories include
<filename>/var/lib/tftp</filename> and <filename>/tftpboot</filename>.
This will create a <filename>debian-installer</filename> directory
tree containing the boot files for an IA-64 system.

</para><para>

<informalexample><screen>
# cd /var/lib/tftp
# tar xvfz /home/user/netboot.tar.gz
./
./debian-installer/
./debian-installer/ia64/
[...]
</screen></informalexample>

The <filename>netboot.tar.gz</filename> contains an
<filename>elilo.conf</filename> file that should work for most configurations.
However, should you need to make changes to this file, you can find it in the
<filename>debian-installer/ia64/</filename> directory.

It is possible to have different config files for different clients by naming
them using the client's IP address in hex with the suffix
<filename>.conf</filename> instead of <filename>elilo.conf</filename>.
See documentation provided in the <classname>elilo</classname> package
for details.

</para>
  </sect3>

  <sect3 arch="ia64" id="boot-tftp-client">
  <title>Configuring the Client</title>
<para>

To configure the client to support TFTP booting, start by booting to
EFI and entering the <guimenu>Boot Option Maintenance Menu</guimenu>.

<itemizedlist>
<listitem><para>

Add a boot option.

</para></listitem>
<listitem><para>

You should see one or more lines with the text
<guimenuitem>Load File [Acpi()/.../Mac()]</guimenuitem>.  If more
than one of these entries exist, choose the one containing the
MAC address of the interface from which you'll be booting.
Use the arrow keys to highlight your choice, then press enter.

</para></listitem>
<listitem><para>

Name the entry <userinput>Netboot</userinput> or something similar,
save, and exit back to the boot options menu.  

</para></listitem>
</itemizedlist>

You should see the new boot option you just created, and selecting it
should initiate a DHCP query, leading to a TFTP load of
<filename>elilo.efi</filename> from the server.

</para><para>

The boot loader will display its prompt after it has downloaded and
processed its configuration file.
At this point, the installation proceeds with the same steps as a
CD install.  Select a boot option as in above and when the kernel
has completed installing itself from the network, it will start the
Debian Installer.

</para><para>

Proceed to the next chapter to continue the installation where
you will set up the language locale, network, and the disk partitions.

</para>
  </sect3>
  </sect2>
