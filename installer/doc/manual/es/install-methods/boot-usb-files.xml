<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- original version: 22935 -->
<!-- revisado por nahoo, 7 noviembre 2004 -->

 <sect1 condition="bootable-usb" id="boot-usb-files">
 <title>Preparación de ficheros para el arranque desde un dispositivo de memoria USB</title>

<para>

Para preparar el dispositivo USB necesitará un sistema donde se esté
ejecutando GNU/Linux con soporte USB. Deberá asegurarse que
el módulo del núcleo «usb-storage» esté cargado
(<userinput>modprobe usb-storage</userinput>) e intente averiguar que
dispositivo SCSI ha sido asignado al dispositivo USB (en este ejemplo
se usa <filename>/dev/sda</filename>). Para escribir en su dispositivo,
probablemente deberá desactivar la protección de escritura.

</para><para>

Note, que el dispositivo USB, deberá tener por lo menos una capacidad de 128 MB
(se pueden realizar configuraciones con menos capacidad, tal como se indica en
<xref linkend="usb-copy-flexible"/>).

</para>

  <sect2 id="usb-copy-easy">
  <title>Copiado de los ficheros - la forma fácil</title>
<para>

Existe un fichero todo-en-uno <filename>hd-media/boot.img.gz</filename>
que contiene todos los ficheros del instalador (incluyendo el núcleo)
así como <command>SYSLINUX</command> y su fichero de configuración.
Sólo debe extraerlo directamente en el dispositivo USB:

<informalexample><screen>

gzip -dc boot.img.gz >/dev/<replaceable>sda</replaceable>

</screen></informalexample>

Obviamente destruirá todo lo que haya en el dispositivo, así
que tenga cuidado y use el nombre de dispositivo correcto para
su dispositivo USB.

</para><para>

Después, monte la memoria USB (<userinput>mount /dev/sda
/mnt</userinput>), que ahora tendrá un sistema de ficheros FAT en ella,
y copie una imagen ISO «netinst» o «bussinesscard» de Debian en ella.
Por favor, tenga en cuenta que el nombre del fichero debe terminar en 
<filename>.iso</filename>. Desmonte el dispositivo USB
(<userinput>umount /mnt</userinput>) y habrá terminado.

</para>
  </sect2>

  <sect2 id="usb-copy-flexible">
  <title>Copiado de los ficheros - la forma flexible</title>
<para>

Si desea más flexibilidad o simplemente le gusta saber que ocurre,
podría usar el siguiente método para colocar los ficheros en su
dispositivo USB. Le mostraremos como configurar la memoria USB para usar
la primera partición en lugar de todo el dispositivo.

</para><note><para>

Puesto de la mayoría de memorias USB vienen con una sola partición 
FAT16 ya configurada, probablemente no tendrá que reparticionarlo o
reformatearlo. Si aún así tiene que hacerlo, use
<command>cfdisk</command> o cualquier otra herramienta de particionado
para crear la partición FAT16 y luego escriba

<informalexample><screen>

mkdosfs /dev/<replaceable>sda1</replaceable>

</screen></informalexample>

Sea precavido y use el nombre de dispositivo correcto para su memoria 
USB. La orden <command>mkdosfs</command> se encuentra en el paquete
de Debian <classname>dosfstools</classname>.

</para></note><para>

Para iniciar el núcleo después de arrancar desde el dispositivo USB,
necesitaremos colocar un gestor de arranque en él. Aunque cualquier
gestor de arranque (como <command>LILO</command>) debería funcionar, es
conveniente usar <command>SYSLINUX</command>, puesto que usa una 
partición FAT16 y puede reconfigurarse con sólo editar un 
fichero de texto. Puede usar cualquier sistema operativo que soporte el
sistema de ficheros FAT para hacer cambios a la configuración del
gestor de arranque.

</para><para>

Para poner <command>SYSLINUX</command> en la partición FAT16 de su dispositivo
USB, instale los paquetes <classname>syslinux</classname> y
<classname>mtools</classname> en su sistema, y escriba

<informalexample><screen>

syslinux /dev/<replaceable>sda1</replaceable>

</screen></informalexample>

Nuevamente, sea precavido al usar el nombre de dispositivo correcto. La
partición no debe estar montada cuando se inicie  <command>SYSLINUX</command>.
Este procedimiento escribe un sector de arranque en la partición y
crea el fichero <filename>ldlinux.sys</filename> que contiene el código
del gestor de arranque.

</para><para>

Monte la partición (<userinput>mount /dev/sda1 /mnt</userinput>) y
copie los siguientes ficheros desde los archivos de Debian, en el 
dispositivo USB:

<itemizedlist>
<listitem><para>

<filename>vmlinuz</filename> (binario del núcleo)

</para></listitem>
<listitem><para>

<filename>initrd.gz</filename> (imagen inicial de disco RAM)

</para></listitem>
<listitem><para>

<filename>syslinux.cfg</filename> (fichero de configuración de SYSLINUX)

</para></listitem>
<listitem><para>

Módulos del núcleo opcionales

</para></listitem>
</itemizedlist>

Si desea renombrar los ficheros, por favor, tenga en cuenta que 
<command>SYSLINUX</command> sólo puede procesar nombres de ficheros DOS (8.3).

</para><para>

El fichero de configuración <filename>syslinux.cfg</filename> debe
contener las dos líneas siguientes:

<informalexample><screen>

default vmlinuz
append initrd=initrd.gz ramdisk_size=10000 root=/dev/rd/0 init=/linuxrc devfs=mount,dall rw

</screen></informalexample>

Por favor, fíjese en que el parámetro <userinput>ramdisk_size</userinput> 
podría necesitar ser incrementado, dependiendo de la imagen que esté
arrancando.

</para><para>

Ahora deberá poner cualquier imagen ISO de Debian («businesscard», «netinst» o
incluso una completa) en su dispositivo (si cabe). El nombre de fichero para
esta imagen debe terminar en <filename>.iso</filename>.

</para><para>

Si desea instalar a través de la red, sin usar una imagen ISO,
puede, por supuesto, obviar el paso anterior. En este caso tendrá
que usar el disco RAM inicial del directorio <filename>netboot</filename>
en lugar del que se encuentra en <filename>hd-media</filename>, debido a que 
<filename>hd-media/initrd.gz</filename> no tiene soporte de red.

</para><para>

Cuando finalice, desmonte el dispositivo USB (<userinput>umount
/mnt</userinput>) y active su protección de escritura.

</para><warning><para>

Si su sistema rechaza arrancar desde el dispositivo USB, éste podría
contener un registro de arranque maestro (MBR) inválido. Para
corregirlo, use la orden <command>install-mbr</command> del
paquete <classname>mbr</classname>:

<informalexample><screen>

install-mbr /dev/<replaceable>sda</replaceable>

</screen></informalexample>

</para></warning>
  </sect2>
 </sect1>
