# Cleanup after the first init, which left the initrd mounted
# on /initrd.
umount /initrd/dev 2>/dev/null
umount /initrd
if [ "`uname -r | grep '^2.2.'`" = "" ]; then
	freeramdisk /dev/rd/0
fi

# Make sure proc and devfs are mounted when we continue.
if [ ! -d /proc/self ] ; then
    mount -t proc proc /proc
fi
if [ ! -e /dev/.devfsd ] ; then
    mount -t devfs devfs /dev
fi
if grep -q '[[:space:]]sysfs' /proc/filesystems; then
    mount -t sysfs sysfs /sys
fi

