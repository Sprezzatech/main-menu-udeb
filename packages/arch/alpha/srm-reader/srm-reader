#!/bin/sh -e

(modprobe srm_env || true) 2> /dev/null

. /usr/share/debconf/confmodule

[ -e /proc/srm_environment/named_variables/language ] || exit 0

LANGCODE=`cat /proc/srm_environment/named_variables/language`

LOCALE=`grep "^$LANGCODE:" /usr/share/srm-reader/lang-codes | cut -b3-`
if [ "x$LOCALE" != "x" ] ; then
	db_set debian-installer/locale "$LOCALE"
fi

exit 0
